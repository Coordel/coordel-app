define(["dojo","dojo/io/iframe","dojox/form/uploader/plugins/HTML5"],function(a){a.declare("dojox.form.uploader.plugins.IFrame",[],{force:"",postMixInProperties:function(){this.inherited(arguments);if(!this.supports("multiple")||this.force=="iframe")this.uploadType="iframe",this.upload=this.uploadIFrame,this.submit=this.submitIFrame},submitIFrame:function(a){this.uploadIFrame(a)},uploadIFrame:function(b){var c,d=!1;this.getForm()?c=this.form:(c=a.create("form",{enctype:"multipart/form-data",method:"post"},this.domNode),a.forEach(this._inputs,function(a,b){a.value&&c.appendChild(a)},this),d=!0);var e=this.getUrl(),f=a.io.iframe.send({url:e,form:c,handleAs:"json",error:a.hitch(this,function(b){d&&a.destroy(c),this.onError(b)}),load:a.hitch(this,function(b,e,f){d&&a.destroy(c),b.ERROR||b.error?this.onError(b):this.onComplete(b)})})}}),dojox.form.addUploaderPlugin(dojox.form.uploader.plugins.IFrame);return dojox.form.uploader.plugins.IFrame})