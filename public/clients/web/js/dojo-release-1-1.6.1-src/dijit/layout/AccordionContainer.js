define("dijit/layout/AccordionContainer",["dojo","dijit","text!dijit/layout/templates/AccordionButton.html","dijit/_Container","dijit/_Templated","dijit/_CssStateMixin","dijit/layout/StackContainer","dijit/layout/ContentPane","dijit/layout/AccordionPane"],function(a,b){a.declare("dijit.layout.AccordionContainer",b.layout.StackContainer,{duration:b.defaultDuration,buttonWidget:"dijit.layout._AccordionButton",baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments),this.domNode.style.overflow="hidden",b.setWaiRole(this.domNode,"tablist")},startup:function(){if(!this._started){this.inherited(arguments);if(this.selectedChildWidget){var a=this.selectedChildWidget.containerNode.style;a.display="",a.overflow="auto",this.selectedChildWidget._wrapperWidget.set("selected",!0)}}},layout:function(){var b=this.selectedChildWidget;if(b){var c=b._wrapperWidget.domNode,d=a._getMarginExtents(c),e=a._getPadBorderExtents(c),f=b._wrapperWidget.containerNode,g=a._getMarginExtents(f),h=a._getPadBorderExtents(f),i=this._contentBox,j=0;a.forEach(this.getChildren(),function(c){c!=b&&(j+=a._getMarginSize(c._wrapperWidget.domNode).h)}),this._verticalSpace=i.h-j-d.h-e.h-g.h-h.h-b._buttonWidget.getTitleHeight(),this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-d.w-e.w-g.w-h.w},b&&b.resize(this._containerContentBox)}},_setupChild:function(a){a._wrapperWidget=new b.layout._AccordionInnerContainer({contentWidget:a,buttonWidget:this.buttonWidget,id:a.id+"_wrapper",dir:a.dir,lang:a.lang,parent:this}),this.inherited(arguments)},addChild:function(b,c){this._started?(a.place(b.domNode,this.containerNode,c),b._started||b.startup(),this._setupChild(b),a.publish(this.id+"-addChild",[b,c]),this.layout(),this.selectedChildWidget||this.selectChild(b)):this.inherited(arguments)},removeChild:function(b){b._wrapperWidget&&(a.place(b.domNode,b._wrapperWidget.domNode,"after"),b._wrapperWidget.destroy(),delete b._wrapperWidget),a.removeClass(b.domNode,"dijitHidden"),this.inherited(arguments)},getChildren:function(){return a.map(this.inherited(arguments),function(a){return a.declaredClass=="dijit.layout._AccordionInnerContainer"?a.contentWidget:a},this)},destroy:function(){this._animation&&this._animation.stop(),a.forEach(this.getChildren(),function(a){a._wrapperWidget?a._wrapperWidget.destroy():a.destroyRecursive()}),this.inherited(arguments)},_showChild:function(a){a._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments)},_hideChild:function(a){a._wrapperWidget.containerNode.style.display="none",this.inherited(arguments)},_transition:function(b,c,d){a.isIE<8&&(d=!1),this._animation&&(this._animation.stop(!0),delete this._animation);var e=this;if(b){b._wrapperWidget.set("selected",!0);var f=this._showChild(b);this.doLayout&&b.resize&&b.resize(this._containerContentBox)}c&&(c._wrapperWidget.set("selected",!1),d||this._hideChild(c));if(d){var g=b._wrapperWidget.containerNode,h=c._wrapperWidget.containerNode,i=b._wrapperWidget.containerNode,j=a._getMarginExtents(i),k=a._getPadBorderExtents(i),l=j.h+k.h;h.style.height=e._verticalSpace-l+"px",this._animation=new a.Animation({node:g,duration:this.duration,curve:[1,this._verticalSpace-l-1],onAnimate:function(a){a=Math.floor(a),g.style.height=a+"px",h.style.height=e._verticalSpace-l-a+"px"},onEnd:function(){delete e._animation,g.style.height="auto",c._wrapperWidget.containerNode.style.display="none",h.style.height="auto",e._hideChild(c)}}),this._animation.onStop=this._animation.onEnd,this._animation.play()}return f},_onKeyPress:function(b,c){if(!this.disabled&&!b.altKey&&(c||b.ctrlKey)){var d=a.keys,e=b.charOrCode;if(c&&(e==d.LEFT_ARROW||e==d.UP_ARROW)||b.ctrlKey&&e==d.PAGE_UP)this._adjacent(!1)._buttonWidget._onTitleClick(),a.stopEvent(b);else if(c&&(e==d.RIGHT_ARROW||e==d.DOWN_ARROW)||b.ctrlKey&&(e==d.PAGE_DOWN||e==d.TAB))this._adjacent(!0)._buttonWidget._onTitleClick(),a.stopEvent(b)}}}),a.declare("dijit.layout._AccordionInnerContainer",[b._Widget,b._CssStateMixin],{baseClass:"dijitAccordionInnerContainer",isContainer:!0,isLayoutContainer:!0,buildRendering:function(){this.domNode=a.place("<div class='"+this.baseClass+"'>",this.contentWidget.domNode,"after");var b=this.contentWidget,c=a.getObject(this.buttonWidget);this.button=b._buttonWidget=(new c({contentWidget:b,label:b.title,title:b.tooltip,dir:b.dir,lang:b.lang,iconClass:b.iconClass,id:b.id+"_button",parent:this.parent})).placeAt(this.domNode),this.containerNode=a.place("<div class='dijitAccordionChildWrapper' style='display:none'>",this.domNode),a.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var b=this.button;this._contentWidgetWatches=[this.contentWidget.watch("title",a.hitch(this,function(a,c,d){b.set("label",d)})),this.contentWidget.watch("tooltip",a.hitch(this,function(a,c,d){b.set("title",d)})),this.contentWidget.watch("iconClass",a.hitch(this,function(a,c,d){b.set("iconClass",d)}))]},_setSelectedAttr:function(a){this._set("selected",a),this.button.set("selected",a);if(a){var b=this.contentWidget;b.onSelected&&b.onSelected()}},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive(),a.forEach(this._contentWidgetWatches||[],function(a){a.unwatch()}),delete this.contentWidget._buttonWidget,delete this.contentWidget._wrapperWidget,this.inherited(arguments)},destroyDescendants:function(){this.contentWidget.destroyRecursive()}}),a.declare("dijit.layout._AccordionButton",[b._Widget,b._Templated,b._CssStateMixin],{templateString:a.cache("dijit.layout","templates/AccordionButton.html"),attributeMap:a.mixin(a.clone(b.layout.ContentPane.prototype.attributeMap),{label:{node:"titleTextNode",type:"innerHTML"},title:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var c=this.id.replace(" ","_");a.attr(this.titleTextNode,"id",c+"_title"),b.setWaiState(this.focusNode,"labelledby",a.attr(this.titleTextNode,"id")),a.setSelectable(this.domNode,!1)},getTitleHeight:function(){return a._getMarginSize(this.domNode).h},_onTitleClick:function(){var a=this.getParent();a.selectChild(this.contentWidget,!0),b.focus(this.focusNode)},_onTitleKeyPress:function(a){return this.getParent()._onKeyPress(a,this.contentWidget)},_setSelectedAttr:function(a){this._set("selected",a),b.setWaiState(this.focusNode,"expanded",a),b.setWaiState(this.focusNode,"selected",a),this.focusNode.setAttribute("tabIndex",a?"0":"-1")}});return b.layout.AccordionContainer})