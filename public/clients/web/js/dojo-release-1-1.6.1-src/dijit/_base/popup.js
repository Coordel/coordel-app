define("dijit/_base/popup",["dojo","dijit","dijit/_base/focus","dijit/_base/place","dijit/_base/window"],function(a,b){b.popup={_stack:[],_beginZIndex:1e3,_idGen:1,_createWrapper:function(b){var c=b.declaredClass?b._popupWrapper:b.parentNode&&a.hasClass(b.parentNode,"dijitPopup"),d=b.domNode||b;if(!c){c=a.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},a.body()),c.appendChild(d);var e=d.style;e.display="",e.visibility="",e.position="",e.top="0px",b.declaredClass&&(b._popupWrapper=c,a.connect(b,"destroy",function(){a.destroy(c),delete b._popupWrapper}))}return c},moveOffScreen:function(b){var c=this._createWrapper(b);a.style(c,{visibility:"hidden",top:"-9999px",display:""})},hide:function(b){var c=this._createWrapper(b);a.style(c,"display","none")},getTopPopup:function(){var a=this._stack;for(var b=a.length-1;b>0&&a[b].parent===a[b-1].widget;b--){}return a[b]},open:function(c){var d=this._stack,e=c.popup,f=c.orient||((c.parent?c.parent.isLeftToRight():a._isBodyLtr())?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"}),g=c.around,h=c.around&&c.around.id?c.around.id+"_dropdown":"popup_"+this._idGen++;while(d.length&&(!c.parent||!a.isDescendant(c.parent.domNode,d[d.length-1].widget.domNode)))b.popup.close(d[d.length-1].widget);var i=this._createWrapper(e);a.attr(i,{id:h,style:{zIndex:this._beginZIndex+d.length},"class":"dijitPopup "+(e.baseClass||e["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:c.parent?c.parent.id:""});if(a.isIE||a.isMoz)e.bgIframe||(e.bgIframe=new b.BackgroundIframe(i));var j=g?b.placeOnScreenAroundElement(i,g,f,e.orient?a.hitch(e,"orient"):null):b.placeOnScreen(i,c,f=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],c.padding);i.style.display="",i.style.visibility="visible",e.domNode.style.visibility="visible";var k=[];k.push(a.connect(i,"onkeypress",this,function(b){if(b.charOrCode==a.keys.ESCAPE&&c.onCancel)a.stopEvent(b),c.onCancel();else if(b.charOrCode===a.keys.TAB){a.stopEvent(b);var d=this.getTopPopup();d&&d.onCancel&&d.onCancel()}})),e.onCancel&&k.push(a.connect(e,"onCancel",c.onCancel)),k.push(a.connect(e,e.onExecute?"onExecute":"onChange",this,function(){var a=this.getTopPopup();a&&a.onExecute&&a.onExecute()})),d.push({widget:e,parent:c.parent,onExecute:c.onExecute,onCancel:c.onCancel,onClose:c.onClose,handlers:k}),e.onOpen&&e.onOpen(j);return j},close:function(b){var c=this._stack;while(b&&a.some(c,function(a){return a.widget==b})||!b&&c.length){var d=c.pop(),e=d.widget,f=d.onClose;e.onClose&&e.onClose(),a.forEach(d.handlers,a.disconnect),e&&e.domNode&&this.hide(e),f&&f()}}},b._frames=new function(){var c=[];this.pop=function(){var d;if(c.length)d=c.pop(),d.style.display="";else{if(a.isIE<9){var e=a.config.dojoBlankHtmlUrl||a.moduleUrl("dojo","resources/blank.html")+""||'javascript:""',f="<iframe src='"+e+"' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";d=a.doc.createElement(f)}else d=a.create("iframe"),d.src='javascript:""',d.className="dijitBackgroundIframe",a.style(d,"opacity",.1);d.tabIndex=-1,b.setWaiRole(d,"presentation")}return d},this.push=function(a){a.style.display="none",c.push(a)}},b.BackgroundIframe=function(c){if(!c.id)throw new Error("no id");if(a.isIE||a.isMoz){var d=this.iframe=b._frames.pop();c.appendChild(d),a.isIE<7||a.isQuirks?(this.resize(c),this._conn=a.connect(c,"onresize",this,function(){this.resize(c)})):a.style(d,{width:"100%",height:"100%"})}},a.extend(b.BackgroundIframe,{resize:function(b){this.iframe&&a.style(this.iframe,{width:b.offsetWidth+"px",height:b.offsetHeight+"px"})},destroy:function(){this._conn&&(a.disconnect(this._conn),this._conn=null),this.iframe&&(b._frames.push(this.iframe),delete this.iframe)}});return b.popup})