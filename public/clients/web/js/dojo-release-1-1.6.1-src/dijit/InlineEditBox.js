define("dijit/InlineEditBox",["dojo","dijit","text!dijit/templates/InlineEditBox.html","dojo/i18n","dijit/_Widget","dijit/_Container","dijit/form/Button","dijit/form/TextBox","i18n!dijit/nls/common"],function(a,b){a.declare("dijit.InlineEditBox",b._Widget,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",renderAsHtml:!1,editor:"dijit.form.TextBox",editorWrapper:"dijit._InlineEditor",editorParams:{},disabled:!1,onChange:function(a){},onCancel:function(){},width:"100%",value:"",noValueIndicator:a.isIE<=6?"<span style='font-family: wingdings; text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>":"<span style='text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>",constructor:function(){this.editorParams={}},postMixInProperties:function(){this.inherited(arguments),this.displayNode=this.srcNodeRef;var c={ondijitclick:"_onClick",onmouseover:"_onMouseOver",onmouseout:"_onMouseOut",onfocus:"_onMouseOver",onblur:"_onMouseOut"};for(var d in c)this.connect(this.displayNode,d,c[d]);b.setWaiRole(this.displayNode,"button"),this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0),!this.value&&!("value"in this.params)&&(this.value=a.trim(this.renderAsHtml?this.displayNode.innerHTML:this.displayNode.innerText||this.displayNode.textContent||"")),this.value||(this.displayNode.innerHTML=this.noValueIndicator),a.addClass(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(b){a.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0"),this.set("disabled",b)},_setDisabledAttr:function(c){b.setWaiState(this.domNode,"disabled",c),c?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",0),a.toggleClass(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",c),this._set("disabled",c)},_onMouseOver:function(){this.disabled||a.addClass(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){a.removeClass(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(b){this.disabled||(b&&a.stopEvent(b),this._onMouseOut(),setTimeout(a.hitch(this,"edit"),0))},edit:function(){if(!this.disabled&&!this.editing){this.editing=!0,this._savedPosition=a.style(this.displayNode,"position")||"static",this._savedOpacity=a.style(this.displayNode,"opacity")||"1",this._savedTabIndex=a.attr(this.displayNode,"tabIndex")||"0";if(this.wrapperWidget){var c=this.wrapperWidget.editWidget;c.set("displayedValue"in c?"displayedValue":"value",this.value)}else{var d=a.create("span",null,this.domNode,"before"),e=typeof this.editorWrapper=="string"?a.getObject(this.editorWrapper):this.editorWrapper;this.wrapperWidget=new e({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:a.getComputedStyle(this.displayNode),save:a.hitch(this,"save"),cancel:a.hitch(this,"cancel")},d),this._started||this.startup()}var f=this.wrapperWidget;a.isIE&&b.focus(b.getFocus()),a.style(this.displayNode,{position:"absolute",opacity:"0",display:"none"}),a.style(f.domNode,{position:this._savedPosition,visibility:"visible",opacity:"1"}),a.attr(this.displayNode,"tabIndex","-1"),setTimeout(a.hitch(this,function(){f.focus(),f._resetValue=f.getValue()}),0)}},_onBlur:function(){this.inherited(arguments),this.editing},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget),this.inherited(arguments)},_showText:function(c){var d=this.wrapperWidget;a.style(d.domNode,{position:"absolute",visibility:"hidden",opacity:"0"}),a.style(this.displayNode,{position:this._savedPosition,opacity:this._savedOpacity,display:""}),a.attr(this.displayNode,"tabIndex",this._savedTabIndex),c&&b.focus(this.displayNode)},save:function(a){if(!this.disabled&&this.editing){this.editing=!1;var b=this.wrapperWidget,c=b.getValue();this.set("value",c),this._showText(a)}},setValue:function(b){a.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",b)},_setValueAttr:function(b){b=a.trim(b);var c=this.renderAsHtml?b:b.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/\n/g,"<br>");this.displayNode.innerHTML=c||this.noValueIndicator,this._set("value",b),this._started&&setTimeout(a.hitch(this,"onChange",b),0)},getValue:function(){a.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(b){!this.disabled&&this.editing&&(this.editing=!1,setTimeout(a.hitch(this,"onCancel"),0),this._showText(b))}}),a.declare("dijit._InlineEditor",[b._Widget,b._Templated],{templateString:a.cache("dijit","templates/InlineEditBox.html"),widgetsInTemplate:!0,postMixInProperties:function(){this.inherited(arguments),this.messages=a.i18n.getLocalization("dijit","common",this.lang),a.forEach(["buttonSave","buttonCancel"],function(a){this[a]||(this[a]=this.messages[a])},this)},buildRendering:function(){this.inherited(arguments);var b=typeof this.editor=="string"?a.getObject(this.editor):this.editor,c=this.sourceStyle,d="line-height:"+c.lineHeight+";",e=a.getComputedStyle(this.domNode);a.forEach(["Weight","Family","Size","Style"],function(a){var b=c["font"+a],f=e["font"+a];f!=b&&(d+="font-"+a+":"+c["font"+a]+";")},this),a.forEach(["marginTop","marginBottom","marginLeft","marginRight"],function(a){this.domNode.style[a]=c[a]},this);var f=this.inlineEditBox.width;f=="100%"?(d+="width:100%;",this.domNode.style.display="block"):d+="width:"+(f+(Number(f)==f?"px":""))+";";var g=a.delegate(this.inlineEditBox.editorParams,{style:d,dir:this.dir,lang:this.lang});g["displayedValue"in b.prototype?"displayedValue":"value"]=this.value,this.editWidget=new b(g,this.editorPlaceholder),this.inlineEditBox.autoSave&&a.destroy(this.buttonContainer)},postCreate:function(){this.inherited(arguments);var a=this.editWidget;this.inlineEditBox.autoSave?(this.connect(a,"onChange","_onChange"),this.connect(a,"onKeyPress","_onKeyPress")):"intermediateChanges"in a&&(a.set("intermediateChanges",!0),this.connect(a,"onChange","_onIntermediateChange"),this.saveButton.set("disabled",!0))},_onIntermediateChange:function(a){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0),this.inherited(arguments)},getValue:function(){var a=this.editWidget;return String(a.get("displayedValue"in a?"displayedValue":"value"))},_onKeyPress:function(b){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing){if(b.altKey||b.ctrlKey)return;b.charOrCode==a.keys.ESCAPE?(a.stopEvent(b),this.cancel(!0)):b.charOrCode==a.keys.ENTER&&b.target.tagName=="INPUT"&&(a.stopEvent(b),this._onChange())}},_onBlur:function(){this.inherited(arguments),this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&this.enableSave()&&(a.style(this.inlineEditBox.displayNode,{display:""}),b.focus(this.inlineEditBox.displayNode))},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus(),setTimeout(a.hitch(this,function(){this.editWidget.focusNode&&this.editWidget.focusNode.tagName=="INPUT"&&b.selectInputText(this.editWidget.focusNode)}),0)}});return b.InlineEditBox})