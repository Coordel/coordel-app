define("dijit/form/_DateTimeTextBox",["dojo","dijit","text!dijit/form/templates/DropDownBox.html","dojo/date","dojo/date/locale","dojo/date/stamp","dijit/form/ValidationTextBox","dijit/_HasDropDown"],function(a,b){new Date("X"),a.declare("dijit.form._DateTimeTextBox",[b.form.RangeBoundTextBox,b._HasDropDown],{templateString:a.cache("dijit.form","templates/DropDownBox.html"),hasDownArrow:!0,openOnClick:!0,regExpGen:a.date.locale.regexp,datePackage:"dojo.date",compare:function(b,c){var d=this._isInvalidDate(b),e=this._isInvalidDate(c);return d?e?0:-1:e?1:a.date.compare(b,c,this._selector)},forceWidth:!0,format:function(a,b){if(!a)return"";return this.dateLocaleModule.format(a,b)},parse:function(a,b){return this.dateLocaleModule.parse(a,b)||(this._isEmpty(a)?null:undefined)},serialize:function(b,c){b.toGregorian&&(b=b.toGregorian());return a.date.stamp.toISOString(b,c)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(c){var d=c.datePackage?c.datePackage+".Date":"Date";this.dateClassObj=a.getObject(d,!1),this.value=new this.dateClassObj(""),this.datePackage=c.datePackage||this.datePackage,this.dateLocaleModule=a.getObject(this.datePackage+".locale",!1),this.regExpGen=this.dateLocaleModule.regexp,this._invalidDate=b.form._DateTimeTextBox.prototype.value.toString()},buildRendering:function(){this.inherited(arguments),this.hasDownArrow||(this._buttonNode.style.display="none");if(this.openOnClick||!this.hasDownArrow)this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick"},_setConstraintsAttr:function(b){b.selector=this._selector,b.fullYear=!0;var c=a.date.stamp.fromISOString;typeof b.min=="string"&&(b.min=c(b.min)),typeof b.max=="string"&&(b.max=c(b.max)),this.inherited(arguments)},_isInvalidDate:function(a){return!a||isNaN(a)||typeof a!="object"||a.toString()==this._invalidDate},_setValueAttr:function(b,c,d){b!==undefined&&(typeof b=="string"&&(b=a.date.stamp.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b))),this.inherited(arguments),this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(a,b){a=="value"&&this.value instanceof Date&&this.compare(b,this.value)==0||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj),this.dropDownDefaultValue=a},openDropDown:function(c){this.dropDown&&this.dropDown.destroy();var d=a.getObject(this.popupClass,!1),e=this,f=this.get("value");this.dropDown=new d({onChange:function(a){b.form._DateTimeTextBox.superclass._setValueAttr.call(e,a,!0)},id:this.id+"_popup",dir:e.dir,lang:e.lang,value:f,currentFocus:this._isInvalidDate(f)?this.dropDownDefaultValue:f,constraints:e.constraints,filterString:e.filterString,datePackage:e.datePackage,isDisabledDate:function(a){return!e.rangeCheck(a,e.constraints)}}),this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,b){this._setValueAttr(this.parse(a,this.constraints),b,a)}});return b.form._DateTimeTextBox})