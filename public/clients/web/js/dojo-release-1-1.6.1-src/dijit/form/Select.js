define("dijit/form/Select",["dojo","dijit","text!dijit/form/templates/Select.html","dijit/form/_FormSelectWidget","dijit/_HasDropDown","dijit/Menu","dijit/Tooltip","i18n!dijit/form/nls/validate"],function(a,b){a.declare("dijit.form._SelectMenu",b.Menu,{buildRendering:function(){this.inherited(arguments);var c=this.menuTableNode=this.domNode,d=this.domNode=a.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});c.parentNode&&c.parentNode.replaceChild(d,c),a.removeClass(c,"dijitMenuTable"),d.className=c.className+" dijitSelectMenu",c.className="dijitReset dijitMenuTable",b.setWaiRole(c,"listbox"),b.setWaiRole(d,"presentation"),d.appendChild(c)},postCreate:function(){this.inherited(arguments),this.connect(this.domNode,"onmousemove",a.stopEvent)},resize:function(b){b&&(a.marginBox(this.domNode,b),"w"in b&&(this.menuTableNode.style.width="100%"))}}),a.declare("dijit.form.Select",[b.form._FormSelectWidget,b._HasDropDown],{baseClass:"dijitSelect",templateString:a.cache("dijit.form","templates/Select.html"),attributeMap:a.mixin(a.clone(b.form._FormSelectWidget.prototype.attributeMap),{style:"tableNode"}),required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&nbsp;",_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var c=this.srcNodeRef.selectedIndex||0;this.value=this.options[c>=0?c:0].value}this.dropDown=new b.form._SelectMenu({id:this.id+"_menu"}),a.addClass(this.dropDown.domNode,this.baseClass+"Menu")},_getMenuItemForOption:function(c){if(c.value||c.label){var d=a.hitch(this,"_setValueAttr",c),e=new b.MenuItem({option:c,label:c.label||this.emptyLabel,onClick:d,disabled:c.disabled||!1});b.setWaiRole(e.focusNode,"listitem");return e}return new b.MenuSeparator},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){if(!this.dropDown)return[];return this.dropDown.getChildren()},_loadChildren:function(c){if(c===!0){this.dropDown&&delete this.dropDown.focusedChild;if(this.options.length)this.inherited(arguments);else{a.forEach(this._getChildren(),function(a){a.destroyRecursive()});var d=new b.MenuItem({label:"&nbsp;"});this.dropDown.addChild(d)}}else this._updateSelection();this._isLoaded=!1,this._childrenLoaded=!0,this._loadingStore||this._setValueAttr(this.value)},_setValueAttr:function(b){this.inherited(arguments),a.attr(this.valueNode,"value",this.get("value"))},_setDisplay:function(a){var c=a||this.emptyLabel;this.containerNode.innerHTML='<span class="dijitReset dijitInline '+this.baseClass+'Label">'+c+"</span>",b.setWaiState(this.focusNode,"valuetext",c)},validate:function(a){var c=this.isValid(a);this._set("state",c?"":"Error"),b.setWaiState(this.focusNode,"invalid",c?"false":"true");var d=c?"":this._missingMsg;this.message!==d&&(this._set("message",d),b.hideTooltip(this.domNode),d&&b.showTooltip(d,this.domNode,this.tooltipPosition,!this.isLeftToRight()));return c},isValid:function(a){return!this.required||this.value===0||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments),b.hideTooltip(this.domNode),this._set("state",""),this._set("message","")},postMixInProperties:function(){this.inherited(arguments),this._missingMsg=a.i18n.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments),this.connect(this.domNode,"onmousemove",a.stopEvent)},_setStyleAttr:function(b){this.inherited(arguments),a.toggleClass(this.domNode,this.baseClass+"FixedWidth",!!this.tableNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0),this._isLoaded=!0,a()},closeDropDown:function(){this.inherited(arguments),this.dropDown&&this.dropDown.menuTableNode&&(this.dropDown.menuTableNode.style.width="")},uninitialize:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown),this.inherited(arguments)}});return b.form.Select})