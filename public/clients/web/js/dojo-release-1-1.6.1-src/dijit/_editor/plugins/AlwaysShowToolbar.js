define("dijit/_editor/plugins/AlwaysShowToolbar",["dojo","dijit","dijit/_editor/_Plugin"],function(a,b){a.declare("dijit._editor.plugins.AlwaysShowToolbar",b._editor._Plugin,{_handleScroll:!0,setEditor:function(b){b.iframe?(this.editor=b,b.onLoadDeferred.addCallback(a.hitch(this,this.enable))):console.log("Port AlwaysShowToolbar plugin to work with Editor without iframe")},enable:function(a){this._updateHeight(),this.connect(window,"onscroll","globalOnScrollHandler"),this.connect(this.editor,"onNormalizedDisplayChanged","_updateHeight");return a},_updateHeight:function(){var b=this.editor;if(b.isLoaded){if(b.height)return;var c=a._getMarginSize(b.editNode).h;a.isOpera&&(c=b.editNode.scrollHeight),c||(c=a._getMarginSize(b.document.body).h);if(c==0)return;if(a.isIE<=7&&this.editor.minHeight){var d=parseInt(this.editor.minHeight);c<d&&(c=d)}c!=this._lastHeight&&(this._lastHeight=c,a.marginBox(b.iframe,{h:this._lastHeight}))}},_lastHeight:0,globalOnScrollHandler:function(){var b=a.isIE<7;if(this._handleScroll){var c=this.editor.header,d=a.body;this._scrollSetUp||(this._scrollSetUp=!0,this._scrollThreshold=a.position(c,!0).y);var e=a._docScroll().y,f=c.style;if(e>this._scrollThreshold&&e<this._scrollThreshold+this._lastHeight){if(!this._fixEnabled){var g=a._getMarginSize(c);this.editor.iframe.style.marginTop=g.h+"px",b?(f.left=a.position(c).x,c.previousSibling?this._IEOriginalPos=["after",c.previousSibling]:c.nextSibling?this._IEOriginalPos=["before",c.nextSibling]:this._IEOriginalPos=["last",c.parentNode],a.body().appendChild(c),a.addClass(c,"dijitIEFixedToolbar")):(f.position="fixed",f.top="0px"),a.marginBox(c,{w:g.w}),f.zIndex=2e3,this._fixEnabled=!0}var h=this.height?parseInt(this.editor.height):this.editor._lastHeight;f.display=e>this._scrollThreshold+h?"none":""}else this._fixEnabled&&(this.editor.iframe.style.marginTop="",f.position="",f.top="",f.zIndex="",f.display="",b&&(f.left="",a.removeClass(c,"dijitIEFixedToolbar"),this._IEOriginalPos?(a.place(c,this._IEOriginalPos[1],this._IEOriginalPos[0]),this._IEOriginalPos=null):a.place(c,this.editor.iframe,"before")),f.width="",this._fixEnabled=!1)}},destroy:function(){this._IEOriginalPos=null,this._handleScroll=!1,a.forEach(this._connects,a.disconnect),a.isIE<7&&a.removeClass(this.editor.header,"dijitIEFixedToolbar")}});return b._editor.plugins.AlwaysShowToolbar})