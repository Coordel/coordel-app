define("dijit/_editor/_Plugin",["dojo","dijit","dijit/_Widget","dijit/form/Button"],function(a,b){a.declare("dijit._editor._Plugin",null,{constructor:function(b,c){this.params=b||{},a.mixin(this,this.params),this._connects=[],this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:b.form.Button,disabled:!1,getLabel:function(a){return this.editor.commands[a]},_initButton:function(){if(this.command.length){var b=this.getLabel(this.command),c=this.editor,d=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var e=a.mixin({label:b,dir:c.dir,lang:c.lang,showLabel:!1,iconClass:d,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(e)}}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){a.forEach(this._connects,a.disconnect),this.dropDown&&this.dropDown.destroyRecursive()},connect:function(b,c,d){this._connects.push(a.connect(b,c,this,d))},updateState:function(){var a=this.editor,b=this.command,c,d;if(a&&a.isLoaded&&b.length){var e=this.get("disabled");if(this.button)try{d=!e&&a.queryCommandEnabled(b),this.enabled!==d&&(this.enabled=d,this.button.set("disabled",!d)),typeof this.button.checked=="boolean"&&(c=a.queryCommandState(b),this.checked!==c&&(this.checked=c,this.button.set("checked",a.queryCommandState(b))))}catch(a){console.log(a)}}},setEditor:function(b){this.editor=b,this._initButton(),this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.connect(this.button,"onClick",a.hitch(this.editor,"execCommand",this.command,this.commandArg)):this.button.domNode.style.display="none"),this.connect(this.editor,"onNormalizedDisplayChanged","updateState")},setToolbar:function(a){this.button&&a.addChild(this.button)},set:function(a,b){if(typeof a==="object"){for(var c in a)this.set(c,a[c]);return this}var d=this._getAttrNames(a);if(this[d.s])var e=this[d.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(a,b);return e||this},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this[a]},_setDisabledAttr:function(a){this.disabled=a,this.updateState()},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.charAt(0).toUpperCase()+a.substr(1);return b[a]={s:"_set"+c+"Attr",g:"_get"+c+"Attr"}},_set:function(a,b){var c=this[a];this[a]=b}});return b._editor._Plugin})