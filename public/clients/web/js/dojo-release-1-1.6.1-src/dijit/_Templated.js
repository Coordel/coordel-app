define("dijit/_Templated",["dojo","dijit","dijit/_Widget","dojo/string","dojo/parser","dojo/cache"],function(a,b){a.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:!1,_skipNodeCache:!1,_earlyTemplatedStartup:!1,constructor:function(){this._attachPoints=[],this._attachEvents=[]},_stringRepl:function(b){var c=this.declaredClass,d=this;return a.string.substitute(b,this,function(b,e){e.charAt(0)=="!"&&(b=a.getObject(e.substr(1),!1,d));if(typeof b=="undefined")throw new Error(c+" template:"+e);if(b==null)return"";return e.charAt(0)=="!"?b:b.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){var c=b._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache),d;if(a.isString(c)){d=a._toDom(this._stringRepl(c));if(d.nodeType!=1)throw new Error("Invalid template: "+c)}else d=c.cloneNode(!0);this.domNode=d,this.inherited(arguments),this._attachTemplateNodes(d);if(this.widgetsInTemplate){var e=this._startupWidgets=a.parser.parse(d,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"});this._supportingWidgets=b.findWidgets(d),this._attachTemplateNodes(e,function(a,b){return a[b]})}this._fillContent(this.srcNodeRef)},_fillContent:function(a){var b=this.containerNode;if(a&&b)while(a.hasChildNodes())b.appendChild(a.firstChild)},_attachTemplateNodes:function(c,d){d=d||function(a,b){return a.getAttribute(b)};var e=a.isArray(c)?c:c.all||c.getElementsByTagName("*"),f=a.isArray(c)?0:-1;for(;f<e.length;f++){var g=f==-1?c:e[f];if(this.widgetsInTemplate&&(d(g,"dojoType")||d(g,"data-dojo-type")))continue;var h=d(g,"dojoAttachPoint")||d(g,"data-dojo-attach-point");if(h){var i,j=h.split(/\s*,\s*/);while(i=j.shift())a.isArray(this[i])?this[i].push(g):this[i]=g,this._attachPoints.push(i)}var k=d(g,"dojoAttachEvent")||d(g,"data-dojo-attach-event");if(k){var l,m=k.split(/\s*,\s*/),n=a.trim;while(l=m.shift())if(l){var o=null;if(l.indexOf(":")!=-1){var p=l.split(":");l=n(p[0]),o=n(p[1])}else l=n(l);o||(o=l),this._attachEvents.push(this.connect(g,l,o))}}var q=d(g,"waiRole");q&&b.setWaiRole(g,q);var r=d(g,"waiState");r&&a.forEach(r.split(/\s*,\s*/),function(a){if(a.indexOf("-")!=-1){var c=a.split("-");b.setWaiState(g,c[0],c[1])}})}},startup:function(){a.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()}),this.inherited(arguments)},destroyRendering:function(){a.forEach(this._attachPoints,function(a){delete this[a]},this),this._attachPoints=[],a.forEach(this._attachEvents,this.disconnect,this),this._attachEvents=[],this.inherited(arguments)}}),b._Templated._templateCache={},b._Templated.getCachedTemplate=function(c,d,e){var f=b._Templated._templateCache,g=d||c,h=f[g];if(h){try{if(!h.ownerDocument||h.ownerDocument==a.doc)return h}catch(i){}a.destroy(h)}d||(d=a.cache(c,{sanitize:!0})),d=a.string.trim(d);if(e||d.match(/\$\{([^\}]+)\}/g))return f[g]=d;var j=a._toDom(d);if(j.nodeType!=1)throw new Error("Invalid template: "+d);return f[g]=j},a.isIE&&a.addOnWindowUnload(function(){var c=b._Templated._templateCache;for(var d in c){var e=c[d];typeof e=="object"&&a.destroy(e),delete c[d]}}),a.extend(b._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});return b._Templated})