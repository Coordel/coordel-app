checkstyleUtil={errors:[],commentNames:["summary","description","example","tags","this"]},checkstyleUtil.applyRules=function(a,b){if(b.charAt(0)!="{"){var c=checkstyleUtil.getComments(b);for(var d in checkstyleUtil.rules)checkstyleUtil.rules[d](a,b,c)}},checkstyleUtil.getComments=function(a){function f(){var c=a.indexOf("/g"),d;while(c>-1){if(!b[c]&&a.charAt(c-1)!="*"){var f=a.charAt(c-1);d=c;while(f!="\n"&&f!="/"&&d>0)f=a.charAt(--d);f=="/"&&d<c-1&&e(d,c)}c=a.indexOf("/g",c+2)}var g=["match","replace"],h;for(d=0;d<g.length;d++){h=g[d],c=a.indexOf(h+"(");while(c>-1)if(b[c])c=a.indexOf(h+"(",c+h.length);else{var i=a.indexOf(")",c);e(c,i+1)}}c=a.indexOf(" = /");while(c>-1){if(!b[c]&&a.charAt(c+4)!="*"){var j=a.indexOf("\n",c+1);e(c+3,Math.max(j,c+4))}c=a.indexOf(" = /",c+3)}}function e(a,c){for(var d=a;d<c;d++)b[d]=1}var b=[],c;for(c=0;c<a.length;c++)b[c]=0;var d="\n";f();var g=null,h,i=1,j=2,k=3,l=4,m=5,n;for(c=0;c<a.length;c++){var o=!1;if(b[c])continue;h=a[c];switch(h){case'"':g==i?g=m:g==null&&(g=i,n=c);break;case"'":g==j?g=m:g==null&&(g=j,n=c);break;case"/":g==null&&(a[c+1]=="/"?(g=k,n=c,o=!0):a[c+1]=="*"&&(g=l,n=c,o=!0));break;case"*":g==l&&(a[c+1]=="/"&&(g=m,o=!0));break;case"\n":g==k&&(g=m)}g!=null&&(b[c]=1),g==m&&(g=null),o&&(c++,b[c]=1)}return b},checkstyleUtil.getLineNumber=function(a,b){var c=0,d="\n";for(var e=b;e>-1;e--)a.charAt(e)=="\n"&&c++;return c+1},checkstyleUtil.addError=function(a,b,c,d){while(b.indexOf("../")==0)b=b.substring(3);checkstyleUtil.errors.push({file:b,line:checkstyleUtil.getLineNumber(c,d),message:a})},checkstyleUtil.getNextChar=function(a,b,c,d){for(var e=b;e<a.length;e++){if(c&&c[e])continue;if(a.charAt(e)!=" "&&a.charAt(e)!="\t"&&(!d||a.charCodeAt(e)!=13))return{value:a[e],pos:e}}return null},checkstyleUtil.findNextCharPos=function(a,b,c){for(var d=b;d<a.length;d++)if(a.charAt(d)==c)return d;return-1},checkstyleUtil.createSimpleSearch=function(a,b){return function(c,d,e){var f=d.indexOf(a);while(f>-1)e[f]||checkstyleUtil.addError(b,c,d,f),f=d.indexOf(a,f+1)}},checkstyleUtil.createSpaceWrappedSearch=function(a,b){return function(c,d,e){var f=d.indexOf(a),g,h,i=a.length;while(f>-1)g=d.charAt(f-1),h=d.charAt(f+i),!e[f]&&(g!=" "&&g!="\t"&&(a!="=="||g!="!")&&(a!="="||g!="<"&&g!=">"&&g!="="&&g!="!"&&g!="+"&&g!="-"&&g!="*"&&g!="/"&&g!="&"&&g!="|")||h!=" "&&d.charCodeAt(f+i)!=13&&d.charCodeAt(f+i)!=10&&(a!="=="||h!="=")&&(a!="!="||h!="=")&&(a!="<"||h!="=")&&(a!=">"||h!="=")&&(a!="="||h!="=")&&(a!="&"||h!="=")&&(a!="|"||h!="=")&&(a!="+"||h!="=")&&(a!="-"||h!="=")&&(a!="*"||h!="=")&&(a!="/"||h!="="))&&checkstyleUtil.addError(b,c,d,f),f=d.indexOf(a,f+a.length)}},checkstyleUtil.isEOL=function(a,b){var c=a.charCodeAt(b);return c==10||c==13||a.charAt(b)=="\n"},checkstyleUtil.rules={elseFollowedBySpace:function(a,b,c){var d=b.indexOf("else ");while(d>-1)!c[d]&&b.substring(d+5,d+7)!="if"&&checkstyleUtil.addError('" else " cannot be followed by a space',a,b,d),d=b.indexOf("else {",d+1)},trailingComma:function(a,b,c){var d=",",e=b.indexOf(d),f;while(e>-1)c[e]||(f=checkstyleUtil.getNextChar(b,e+1,c,!0),f&&f.value=="}"&&checkstyleUtil.addError("Trailing commas are not permitted",a,b,e)),e=b.indexOf(d,e+1)},switchCaseNewLine:function(a,b,c){var d="\tcase ",e=b.indexOf(d),f,g;while(e>-1){if(!c[e]){g=b.indexOf("\n",e+4);if(g>e)for(var h=g;h>e+4;h--){var i=b.charAt(h);if(!c[h]&&i!=" "&&i!="\t"&&i!=":"&&!checkstyleUtil.isEOL(b,h)){checkstyleUtil.addError("A CASE statement should be followed by a new line",a,b,e);break}if(i==":")break}}e=b.indexOf(d,e+4)}},curlyBraceAtStartOfLine:function(a,b,c){var d=b.indexOf("\n");while(d>-1){var e=checkstyleUtil.getNextChar(b,d+1);if(e&&!c[e.pos]&&e.value=="{"){var f=0,g;for(g=d-1;g>-1&&f<3;g--)b[g]=="\n"&&f++;var h=b.indexOf("dojo.declare",Math.max(0,g));(h<0||h>d)&&checkstyleUtil.addError("An opening curly brace should not be the first on a line",a,b,d)}d=b.indexOf("\n",d+1)}},parenthesisSpaceCurlyBrace:checkstyleUtil.createSimpleSearch(") {","A space is not permitted between a closing parenthesis and a curly brace"),useTabs:function(a,b,c){var d=b.indexOf("  ");while(d>-1){var e=checkstyleUtil.getNextChar(b,d+1);if(!c[d]&&e&&e.value.charCodeAt(0)!=13){checkstyleUtil.addError("Tabs should be used instead of spaces",a,b,d);var f=checkstyleUtil.findNextCharPos(b,d+1,"\n");if(f<0)break;d=b.indexOf("  ",f+1)}else d=b.indexOf("  ",d+2)}},commentFormatting:function(a,b,c){var d=checkstyleUtil.commentNames,e=["//","//\t"],f;for(var g=0;g<d.length;g++){var h=d[g];for(var i=0;i<e.length;i++){f=b.indexOf(e[i]+h+":");while(f>-1){checkstyleUtil.addError('Must be just a space in a comment before "'+h+'"',a,b,f);var j=checkstyleUtil.findNextCharPos(b,f+1,"\n");if(j<0)break;f=b.indexOf(e[i]+h+":",j)}}f=b.indexOf(h+":");while(f>-1){if(c[f]){var k=f+h.length+1;while(!checkstyleUtil.isEOL(b,k)){if(b[k]!=" "&&b[k]!="\t"){checkstyleUtil.addError('The comment "'+h+'" must be followed by a new line',a,b,f);break}k++}}f=b.indexOf(h+":",f+h.length+2)}}},spacesAroundEquals:checkstyleUtil.createSpaceWrappedSearch("==","The equals sign should be preceded and followed by a space"),spacesAroundNotEquals:checkstyleUtil.createSpaceWrappedSearch("!=","The != sign should be preceded and followed by a space"),spacesAroundAssignment:checkstyleUtil.createSpaceWrappedSearch("=","The = sign should be preceded and followed by a space"),spacesAroundOr:checkstyleUtil.createSpaceWrappedSearch("||","The || sign should be preceded and followed by a space"),spacesAroundLessThan:checkstyleUtil.createSpaceWrappedSearch("<","The < sign should be preceded and followed by a space"),spacesAroundGreaterThan:checkstyleUtil.createSpaceWrappedSearch(">","The > sign should be preceded and followed by a space"),spacesAroundAnd:checkstyleUtil.createSpaceWrappedSearch("&&","The && sign should be preceded and followed by a space")};var noSpaceAfter=["catch","do","finally","for","if","switch","try","while","with"];checkstyleUtil.createNoSpaceAfterFunction=function(a){checkstyleUtil.rules["noSpaceAfter"+noSpaceAfter[i]+"1"]=checkstyleUtil.createSimpleSearch(" "+a+" ",'" '+a+' " cannot be followed by a space'),checkstyleUtil.rules["noSpaceAfter"+noSpaceAfter[i]+"2"]=checkstyleUtil.createSimpleSearch("\t"+a+" ",'" '+a+' " cannot be followed by a space')};for(var i=0;i<noSpaceAfter.length;i++)checkstyleUtil.createNoSpaceAfterFunction(noSpaceAfter[i]);checkstyleUtil.clear=function(){checkstyleUtil.errors=[]},checkstyleUtil.serializeErrors=function(){var a=[],b=checkstyleUtil.errors;for(var c=0;c<b.length;c++)a.push(b[c].file+":"+b[c].line+" - "+b[c].message);return a.join("\n")},checkstyleUtil.makeSimpleFixes=function(a){var b=checkstyleUtil.getComments(a);for(var c=0;c<noSpaceAfter.length;c++)a=checkstyleUtil.fixSpaceAfter(a,noSpaceAfter[c],b);a=checkstyleUtil.replaceAllExceptComments(a,"=  ","= ",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,"    ","\t",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,"  ","\t",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,"\tif (","\tif(",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,"} else","}else",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,"}\telse","}else",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,"}else {","}else{",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,"\twhile (","\twhile(",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,"\tfor (","\tfor(",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,"\tswitch (","\tswitch(",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,") {","){",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.replaceAllExceptComments(a,"//summary:","// summary:",{}),a=checkstyleUtil.replaceAllExceptComments(a,"//description:","// description:",{}),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixTrailingWhitespace(a),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,"===",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,"!==",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,"<=",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,"<",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,">=",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,">",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,"!=",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,"==",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,"=",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,"||",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixSpaceBeforeAndAfter(a,"&&",b),b=checkstyleUtil.getComments(a),a=checkstyleUtil.fixCommentNames(a);return a},checkstyleUtil.fixCommentNames=function(a){var b=checkstyleUtil.commentNames,c;for(c=0;c<b.length;c++)a=checkstyleUtil.replaceAllExceptComments(a,"//\t"+b[c]+":","// "+b[c]+":",{});for(c=0;c<b.length;c++){var d=b[c],e="// "+d+":",f=a.indexOf(e);while(f>-1){if(!checkstyleUtil.isEOL(a,f+d.length+4)){var g="",h=f-1;while(!checkstyleUtil.isEOL(a,h))g+=a.charAt(h),h--;var i=f+d.length+4;if(a.charAt(i)==" "||a.charAt(i)=="\t")a=checkstyleUtil.deleteChar(a,i);a=checkstyleUtil.insertChar(a,"\n"+g+"//\t\t",f+d.length+4)}f=a.indexOf(e,f+d.length)}}return a},checkstyleUtil.replaceAllExceptComments=function(a,b,c,d){var e=a.indexOf(b),f=[];while(e>-1)d[e]||f.push(e),e=a.indexOf(b,e+b.length);for(var g=f.length-1;g>-1;g--)e=f[g],d[e]||(a=a.substring(0,e)+c+a.substring(e+b.length,a.length));return a},checkstyleUtil.insertChar=function(a,b,c){return a.substring(0,c)+b+a.substring(c)},checkstyleUtil.deleteChar=function(a,b){return a.substring(0,b)+a.substring(b+1)},checkstyleUtil.fixTrailingWhitespace=function(a){var b=a.indexOf("\n");while(b>-1){var c=b-1;while(c>-1&&(a.charAt(c)==" "||a.charAt(c)=="\t"))c--;c<b-1?(a=a.substring(0,c+1)+a.substring(b,a.length),b=a.indexOf("\n",c+2)):b=a.indexOf("\n",b+1)}return a},checkstyleUtil.fixSpaceAfter=function(a,b,c){var d=a.indexOf(b+" ");while(d>-1)c[d]||(a=checkstyleUtil.deleteChar(a,d+b.length)),d=a.indexOf(b+" ",d+b.length);return a},checkstyleUtil.fixSpaceBeforeAndAfter=function(a,b,c){var d=a.indexOf(b),e,f,g=b.length;while(d>-1)e=a.charAt(d-1),f=a.charAt(d+g),c[d]||(e!=" "&&e!="\t"&&(b!="=="||e!="!"&&e!="=")&&(b!="="||e!="<"&&e!=">"&&e!="="&&e!="!"&&e!="+"&&e!="-"&&e!="*"&&e!="/"&&e!="&"&&e!="|")&&(a=checkstyleUtil.insertChar(a," ",d),d++),f!=" "&&a.charCodeAt(d+g)!=13&&a.charCodeAt(d+g)!=10&&(b!="=="||f!="=")&&(b!="!="||f!="=")&&(b!="="||f!="=")&&(b!="<"||f!="=")&&(b!=">"||f!="=")&&(b!="&"||f!="=")&&(b!="|"||f!="=")&&(b!="+"||f!="=")&&(b!="-"||f!="=")&&(b!="*"||f!="=")&&(b!="/"||f!="=")&&(a=a=checkstyleUtil.insertChar(a," ",d+b.length),d++)),d=a.indexOf(b,d+b.length);return a},checkstyleUtil.generateReport=function(a){function j(a){d[a]||(d[a]=!0,c.push("{id: '"+b++ +"', file: '"+a+"', folder: 1}"))}function i(a){var b=a.lastIndexOf("/");return a.substring(0,b)}var b=1,c=["{id:'"+b++ +"', file: 'All', isFolder:true}"],d={},e={},f=1,g,h;for(g=0;g<checkstyleUtil.errors.length;g++){h=checkstyleUtil.errors[g];var k=h.message,l=e[k];l||(l="m"+f++,e[k]=l,c.push("{id:'"+l+"',msg:'"+k+"'}"))}j("All");for(g=0;g<checkstyleUtil.errors.length;g++){h=checkstyleUtil.errors[g];var m=i(h.file);j(m),c.push("{id:'"+b++ +"', file:'"+h.file+"',line:"+h.line+",msg:{'_reference':'"+e[h.message]+"'},folder: 0}")}c.push("{id:'"+b++ +"', date: "+(new Date).getTime()+"}"),a||print("Found "+checkstyleUtil.errors.length+" checkstyle errors. Open the file checkstyleReport.html to view the results.");return"{ identifier: 'id', label:'file', items: ["+c.join(",\n")+"]}"}