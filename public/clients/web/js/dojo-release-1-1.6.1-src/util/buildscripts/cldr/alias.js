function cleanLocaleAlias(a){for(var b=0;b<a.length;b++){var c=new String(a[b]);try{var d=getNativeBundle(c)}catch(e){print(e)}var f={},g=!1;for(p in d)p.indexOf(LOCALE_ALIAS_MARK)<0?f[p]=d[p]:g=!0;g&&fileUtil.saveUtf8File(c,"("+dojo.toJson(f,!0)+")")}}function _updateLocaleAlias(a,b,c,d,e){if(e[b]||!e[d]||compare(a[b],c[d])){if(e[b]&&dojo.isArray(a[b])&&dojo.isArray(c[d])){a[b].length<=c[d].length;for(var f=0;f<a[b].length;f++)a[b][f]==undefined&&(a[b][f]=c[d][f],updated=!0);a[b].length<c[d].length&&(a[b]=a[b].concat(c[d].slice(a[b].length)),updated=!0),updated&&(e[b]=a[b])}}else e[b]=c[d],a[b]=e[b],updated=!0}function _updateNoneGregAlias(a,b,c,d,e){for(var f in a){var g=c[f],h=a[f],i=e[f];if(f.indexOf(b)!=0||i||!g||compare(h,g)){if(f.indexOf(b)==0&&i&&dojo.isArray(h)&&dojo.isArray(g)){for(var j=0;j<h.length;j++)h[j]===undefined&&(h[j]=g[j],updated=!0);h.length<g.length&&(h=a[f]=h.concat(g.slice(h.length)),updated=!0),updated&&(e[f]=h)}}else e[f]=g,a[f]=g,updated=!0}}function _processLocaleAlias(a,b,c,d){var e={};for(var f=0;f<a.length;f++){var g=a[f];for(var h=0;h<g.length;h++){var i=g[h];if(i[LOCALE_ALIAS_SOURCE_PROPERTY]!=i[LOCALE_ALIAS_TARGET_PROPERTY]&&b[i[LOCALE_ALIAS_TARGET_PROPERTY]]){if(e[i[LOCALE_ALIAS_SOURCE_PROPERTY]])continue;_updateLocaleAlias(b,i[LOCALE_ALIAS_SOURCE_PROPERTY],b,i[LOCALE_ALIAS_TARGET_PROPERTY],c),e[i[LOCALE_ALIAS_SOURCE_PROPERTY]]=!0}else{var j=dojo.i18n.getLocalization("dojo.cldr",i[LOCALE_ALIAS_TARGET_BUNDLE],d);if(e[i[LOCALE_ALIAS_SOURCE_PROPERTY]])continue;_updateNoneGregAlias(b,i[LOCALE_ALIAS_SOURCE_PROPERTY],j,i[LOCALE_ALIAS_TARGET_PROPERTY],c),e[i[LOCALE_ALIAS_SOURCE_PROPERTY]]=!0}}}}function _calculateAliasPath(a){for(p in a){var b=p.indexOf(LOCALE_ALIAS_MARK);if(b>=0){var c=p.substring(0,b);if(records[c])continue;var d=[],e=new Number(p.substring(b+LOCALE_ALIAS_MARK.length)),f=e;while(a[c+LOCALE_ALIAS_MARK+ --f]){}var g=c;while(a[c+LOCALE_ALIAS_MARK+ ++f]){var h={};h[LOCALE_ALIAS_SOURCE_PROPERTY]=g,h[LOCALE_ALIAS_TARGET_PROPERTY]=a[c+LOCALE_ALIAS_MARK+f][LOCALE_ALIAS_TARGET_PROPERTY],h[LOCALE_ALIAS_TARGET_BUNDLE]=a[c+LOCALE_ALIAS_MARK+f][LOCALE_ALIAS_TARGET_BUNDLE],d.push(h),records[g]=!0,g=a[c+LOCALE_ALIAS_MARK+f][LOCALE_ALIAS_TARGET_PROPERTY]}d=d.reverse(),localeAliasPaths.push(d)}}}djConfig={baseUrl:"../../../dojo/"},load("../../../dojo/dojo.js"),load("../jslib/logger.js"),load("../jslib/fileUtil.js"),load("cldrUtil.js"),dojo.require("dojo.i18n");var dir=arguments[0],logDir=arguments[1],logStr="",BUNDLES=["gregorian","hebrew","islamic","islamic-civil","buddhist"],LOCALE_ALIAS_MARK="@localeAlias",LOCALE_ALIAS_SOURCE_PROPERTY="source",LOCALE_ALIAS_TARGET_PROPERTY="target",LOCALE_ALIAS_TARGET_BUNDLE="bundle",localeAliasPaths=[],records={},updated=!1;print("alias.js...");for(var i=0;i<BUNDLES.length;i++){var regExp=new RegExp("/"+BUNDLES[i]+".js$"),fileList=fileUtil.getFilteredFileList(dir,regExp,!0);for(var j=0;j<fileList.length;j++){var jsFileName=new String(fileList[j]),jsFilePath=jsFileName.split("/"),locale=jsFilePath[jsFilePath.length-2];if(locale=="nls")continue;try{dojo.i18n._requireLocalization("dojo.cldr",BUNDLES[i],locale);var bundle=dojo.i18n.getLocalization("dojo.cldr",BUNDLES[i],locale),nativeSrcBundle=getNativeBundle(jsFileName)}catch(e){print(e)}if(!bundle)continue;updated=!1,_calculateAliasPath(bundle),_processLocaleAlias(localeAliasPaths,bundle,nativeSrcBundle,locale),updated&&fileUtil.saveUtf8File(jsFileName,"("+dojo.toJson(nativeSrcBundle,!0)+")")}cleanLocaleAlias(fileList)}