djConfig={baseUrl:"../../../dojo/"},load("../../../dojo/dojo.js"),load("../jslib/logger.js"),load("../jslib/fileUtil.js"),load("cldrUtil.js"),dojo.require("dojo.i18n");var dir=arguments[0],logDir=arguments[1],logStr="";print("wrap.js...");var wrap=function(a){return"\n//begin v1.x content\n"+a+"\n//end v1.x content\n"},fileLists=fileUtil.getFilteredFileList(dir,/\.js$/,!0,!1,!0).map(function(a){var b=a.substring(a.lastIndexOf("/"));return fileUtil.getFilteredFileList(dir,new RegExp(b+"$"),!0)});fileLists.forEach(function(a){var b={},c=[],d;a.forEach(function(a){logStr+="WRAP processing file: "+a.toString()+"\n";var e=a.split("/"),f=e[e.length-2],g=dojo.fromJson(fileUtil.readFile(a));f=="nls"?(d=a,b.root=g,logStr+="rootFile="+a.toString()+"\n"):(logStr+="locale added: "+f+"\n",c.push(f),b[f]=!0,fileUtil.saveUtf8File(a,"define("+wrap(dojo.toJson(g,!0))+");"))}),logStr+="writing rootFile="+d+"\n";var e="{ root:\n";e+=wrap(dojo.toJson(b.root,!0)),c.length&&(c.sort(),c.forEach(function(a){e+=',\n\t"'+a+'": true'}),e+="\n"),e+="}",fileUtil.saveUtf8File(d,"define("+e+");")}),fileUtil.saveUtf8File(logDir+"/wrap.log",logStr+"\n")