var buildUtilXd={};buildUtilXd.setXdDojoConfig=function(a,b){var c=a.match(/(dojo\.registerModulePath\s*=\s*function.*\{)/),d=a.indexOf("}",c.index);d=a.indexOf("}",d+1),a.charAt(d+1)==";"&&(d+=1),d+=1;var e=fileUtil.getLineSeparator();return a.substring(0,d)+e+'if(typeof dojo.config["useXDomain"] == "undefined"){dojo.config.useXDomain = true;};\ndojo.registerModulePath("dojo", "'+b+'/dojo");\ndojo.registerModulePath("dijit", "'+b+'/dijit");\ndojo.registerModulePath("dojox", "'+b+'/dojox");'+e+a.substring(d,a.length)},buildUtilXd.xdgen=function(a,b,c,d,e){var f=fileUtil.getFilteredFileList(b,/\.js$/,!0),g=/dojo\/_base\/_loader\/loader_xd/;for(var h=0;h<f.length;h++){var i=f[h];if(!i.match(d)&&!i.match(g)){var j=i.replace(/\.js$/,".xd.js"),k=fileUtil.readFile(i);if(i.match(/\/nls\//)&&k.indexOf("dojo.provide(")==-1)var l=buildUtilXd.makeXdBundleContents(a,b,i,k,c,e);else l=buildUtilXd.makeXdContents(k,c,e);fileUtil.saveUtf8File(j,l)}}},buildUtilXd.makeXdContents=function(a,b,c){var d=[],e=buildUtil.removeComments(a).match(buildUtil.globalDependencyRegExp);if(e)for(var f=0;f<e.length;f++){var g=e[f].match(buildUtil.dependencyPartsRegExp),h=g[1],i=g[2];if(h=="requireLocalization"){var j=i18nUtil.getRequireLocalizationArgsFromString(i);if(!j.moduleName)continue;var k=i18nUtil.getLocalesForBundle(j.moduleName,j.bundleName,b);j.localeName||(i+=", null"),h="requireLocalization",i+=', "'+k.join(",")+'"'}d.push('"'+h+'", '+i)}var l=[],m=c.xdScopeArgs||"dojo, dijit, dojox";l.push((c.xdDojoScopeName||"dojo")+"._xdResourceLoaded(function("+m+"){\n");var n=buildUtilXd.extractLoadInits(a);if(n){a=n[0];for(f=1;f<n.length;f++)l.push(n[f]+";\n")}l.push("return {");if(d.length>0){l.push("depends: [");for(f=0;f<d.length;f++)f>0&&l.push(",\n"),l.push("["+d[f]+"]");l.push("],")}l.push("\ndefineResource: function("+m+"){"),l.push(String(a).replace(/dojo\.(requireLocalization|i18n\._preloadLocalizations)\([^\)]*\)/g,"")),l.push("\n}};});");return l.join("")},buildUtilXd.makeXdBundleContents=function(a,b,c,d,e,f){var g=i18nUtil.getBundlePartsFromFileName(a,b,c);if(!g)return null;var h=g.moduleName,i=g.bundleName,j=g.localeName;d=a.indexOf("dojo")==0?d:i18nUtil.makeFlatBundleContents(a,b,c),d='dojo.provide("'+h+".nls."+(j?j+".":"")+i+'");dojo._xdLoadFlattenedBundle("'+h+'", "'+i+'", "'+j+'", '+d+");";return buildUtilXd.makeXdContents(d,e,f)},buildUtilXd.loadInitRegExp=/dojo\.loadInit\s*\(/g,buildUtilXd.extractLoadInits=function(a){return buildUtil.extractMatchedParens(buildUtilXd.loadInitRegExp,a)}