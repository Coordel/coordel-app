window.dojo?(dojo.provide("doh.robot"),dojo.experimental("doh.robot"),dojo.require("doh.runner")):doh.robot||(doh.robot={}),doh.robot._robotLoaded||function(){var a=null,b=function(){var a=Math.random();return function(b){return a}}(),c=doh.run;doh.run=function(){if(!doh.robot._runsemaphore.unlock()){var a=doh._onEnd;doh._onEnd=function(){doh.robot.killRobot(),doh._onEnd=a,doh._onEnd()},doh.robot.startRobot()}};var d=function(){doh.robot.killRobot()};typeof dojo!=="undefined"?dojo.addOnUnload(d):window.onunload=d;var e=function(c,d,e,f,g,h,i,j){a.typeKey(b(),Number(c),Number(d),Boolean(e),Boolean(f),Boolean(g),Boolean(h),Number(i||0),Boolean(j||!1))};doh.robot={_robotLoaded:!0,_robotInitialized:!1,_spaceReceived:!1,_primePump:!1,_killApplet:function(){},killRobot:function(){doh.robot._robotLoaded&&(doh.robot._robotLoaded=!1,document.documentElement.className=document.documentElement.className.replace(/ ?dohRobot/,""),doh.robot._killApplet())},_runsemaphore:{lock:["lock"],unlock:function(){try{return this.lock.shift()}catch(a){return null}}},startRobot:function(){this._robotInitialized||(this._robotInitialized=!0,doh.robot._appletDead?doh.robot._onKeyboard():a._callLoaded(b()))},_initRobot:function(c){doh._initRobotCalled||(doh._initRobotCalled=!0,document.documentElement.className+=" dohRobot",window.scrollTo(0,0),a=c,a._setKey(b()),doh.run())},_run:function(a){a.style.visibility="hidden",doh.run=c,doh.run()},_initKeyboard:function(){a._initKeyboard(b())},_initWheel:function(){a._initWheel(b())},_setDocumentBounds:function(c,d){var e=document.getElementById("dohrobotview");a.setDocumentBounds(b(),Number(c),Number(d),Number(e.offsetLeft),Number(e.offsetTop))},_notified:function(c){a._notified(b(),c)},_time:0,_appletDead:!1,_assertRobot:function(){if(doh.robot._appletDead)throw new Error("doh.robot not available; skipping test.")},_mouseMove:function(c,d,e,f){if(e){var g={y:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,x:window.pageXOffset||(window.dojo?dojo._fixIeBiDiScrollLeft(document.documentElement.scrollLeft):undefined)||document.body.scrollLeft||0};d-=g.y,c-=g.x}a.moveMouse(b(),Number(c),Number(d),Number(0),Number(f||100))},sequence:function(a,b,c){var d=(new Date).getTime();d>(doh.robot._time||0)&&(doh.robot._time=d),doh.robot._time+=b||1,setTimeout(a,doh.robot._time-d),doh.robot._time+=c||0},typeKeys:function(a,b,c){this._assertRobot(),this.sequence(function(){var b=typeof a==Number;c=c||(b?50:a.length*50);if(b)e(a,a,!1,!1,!1,!1,0);else if(a.length){e(a.charCodeAt(0),0,!1,!1,!1,!1,0);for(var d=1;d<a.length;d++)e(a.charCodeAt(d),0,!1,!1,!1,!1,Math.max(Math.floor(c/a.length),0))}},b,c)},keyPress:function(a,b,c,d){this._assertRobot();if(c){var f=["alt","ctrl","shift","meta"];for(var g=0;g<f.length;g++)c[f[g]]||(c[f[g]]=!1)}else c={alt:!1,ctrl:!1,shift:!1,meta:!1};var h=typeof a=="string";d?e(h?a.charCodeAt(0):0,h?0:a,c.alt,c.ctrl,c.shift,c.meta,b,!0):this.sequence(function(){e(h?a.charCodeAt(0):0,h?0:a,c.alt,c.ctrl,c.shift,c.meta,0)},b)},keyDown:function(c,d){this._assertRobot(),this.sequence(function(){var d=typeof c=="string";a.downKey(b(),d?c:0,d?0:c,0)},d)},keyUp:function(c,d){this._assertRobot(),this.sequence(function(){var d=typeof c=="string";a.upKey(b(),d?c:0,d?0:c,0)},d)},mouseClick:function(a,b){this._assertRobot(),doh.robot.mousePress(a,b),doh.robot.mouseRelease(a,1)},mousePress:function(c,d){this._assertRobot();c&&this.sequence(function(){var d=["left","middle","right"];for(var e=0;e<d.length;e++)c[d[e]]||(c[d[e]]=!1);a.pressMouse(b(),Boolean(c.left),Boolean(c.middle),Boolean(c.right),Number(0))},d)},mouseMove:function(a,b,c,d,e){this._assertRobot(),d=d||100,this.sequence(function(){doh.robot._mouseMove(a,b,e,d)},c,d)},mouseRelease:function(c,d){this._assertRobot();c&&this.sequence(function(){var d=["left","middle","right"];for(var e=0;e<d.length;e++)c[d[e]]||(c[d[e]]=!1);a.releaseMouse(b(),Boolean(c.left),Boolean(c.middle),Boolean(c.right),Number(0))},d)},mouseWheelSize:1,mouseWheel:function(c,d,e){this._assertRobot();c&&this.sequence(function(){a.wheelMouse(b(),Number(c),Number(0),Number(e||0))},d,e)},setClipboard:function(c,d){d==="text/html"?a.setClipboardHtml(b(),c):a.setClipboardText(b(),c)}};var f,g=document.getElementsByTagName("script");for(var h=0;h<g.length;h++){var i=g[h].getAttribute("src");if(i&&i.substr(i.length-9)=="runner.js"){f=i.substr(0,i.length-9)+"Robot.html";break}}!f&&window.dojo&&(f=dojo.moduleUrl("util","doh/")+"Robot.html?domain="+escape(document.domain)),document.writeln('<div id="dohrobotview" style="border:0px none; margin:0px; padding:0px; position:absolute; bottom:0px; right:0px; width:1px; height:1px; overflow:hidden; visibility:hidden; background-color:red;"></div><iframe application="true" style="border:0px none; z-index:32767; padding:0px; margin:0px; position:absolute; left:0px; top:0px; height:42px; width:200px; overflow:hidden; background-color:transparent;" tabIndex="-1" src="'+f+'" ALLOWTRANSPARENCY="true"></iframe>')}()