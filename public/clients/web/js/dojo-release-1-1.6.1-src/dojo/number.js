define("dojo/number",["dojo","dojo/i18n","i18n!dojo/cldr/nls/number","dojo/string","dojo/regexp"],function(a){a.getObject("number",!0,a),a.number.format=function(b,c){c=a.mixin({},c||{});var d=a.i18n.normalizeLocale(c.locale),e=a.i18n.getLocalization("dojo.cldr","number",d);c.customs=e;var f=c.pattern||e[(c.type||"decimal")+"Format"];if(isNaN(b)||Math.abs(b)==Infinity)return null;return a.number._applyPattern(b,f,c)},a.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,a.number._applyPattern=function(b,c,d){d=d||{};var e=d.customs.group,f=d.customs.decimal,g=c.split(";"),h=g[0];c=g[b<0?1:0]||"-"+h;if(c.indexOf("%")!=-1)b*=100;else if(c.indexOf("‰")!=-1)b*=1e3;else if(c.indexOf("¤")!=-1)e=d.customs.currencyGroup||e,f=d.customs.currencyDecimal||f,c=c.replace(/\u00a4{1,3}/,function(a){var b=["symbol","currency","displayName"][a.length-1];return d[b]||d.currency||""});else if(c.indexOf("E")!=-1)throw new Error("exponential notation not supported");var i=a.number._numberPatternRE,j=h.match(i);if(!j)throw new Error("unable to find a number expression in pattern: "+c);d.fractional===!1&&(d.places=0);return c.replace(i,a.number._formatAbsolute(b,j[0],{decimal:f,group:e,places:d.places,round:d.round}))},a.number.round=function(a,b,c){var d=10/(c||10);return(d*+a).toFixed(b)/d},.9..toFixed()==0&&function(){var b=a.number.round;a.number.round=function(a,c,d){var e=Math.pow(10,-c||0),f=Math.abs(a);if(!a||f>=e||f*Math.pow(10,c+1)<5)e=0;return b(a,c,d)+(a>0?e:-e)}}(),a.number._formatAbsolute=function(b,c,d){d=d||{},d.places===!0&&(d.places=0),d.places===Infinity&&(d.places=6);var e=c.split("."),f=typeof d.places=="string"&&d.places.indexOf(","),g=d.places;f?g=d.places.substring(f+1):g<0&&(g=(e[1]||[]).length),d.round>=0&&(b=a.number.round(b,g,d.round));var h=String(Math.abs(b)).split("."),i=h[1]||"";if(e[1]||d.places){f&&(d.places=d.places.substring(0,f));var j=d.places!==undefined?d.places:e[1]&&e[1].lastIndexOf("0")+1;j>i.length&&(h[1]=a.string.pad(i,j,"0",!0)),g<i.length&&(h[1]=i.substr(0,g))}else h[1]&&h.pop();var k=e[0].replace(",","");j=k.indexOf("0"),j!=-1&&(j=k.length-j,j>h[0].length&&(h[0]=a.string.pad(h[0],j)),k.indexOf("#")==-1&&(h[0]=h[0].substr(h[0].length-j)));var l=e[0].lastIndexOf(","),m,n;if(l!=-1){m=e[0].length-l-1;var o=e[0].substr(0,l);l=o.lastIndexOf(","),l!=-1&&(n=o.length-l-1)}var p=[];for(var q=h[0];q;){var r=q.length-m;p.push(r>0?q.substr(r):q),q=r>0?q.slice(0,r):"",n&&(m=n,delete n)}h[0]=p.reverse().join(d.group||",");return h.join(d.decimal||".")},a.number.regexp=function(b){return a.number._parseInfo(b).regexp},a.number._parseInfo=function(b){b=b||{};var c=a.i18n.normalizeLocale(b.locale),d=a.i18n.getLocalization("dojo.cldr","number",c),e=b.pattern||d[(b.type||"decimal")+"Format"],f=d.group,g=d.decimal,h=1;if(e.indexOf("%")!=-1)h/=100;else if(e.indexOf("‰")!=-1)h/=1e3;else{var i=e.indexOf("¤")!=-1;i&&(f=d.currencyGroup||f,g=d.currencyDecimal||g)}var j=e.split(";");j.length==1&&j.push("-"+j[0]);var k=a.regexp.buildGroupRE(j,function(c){c="(?:"+a.regexp.escapeString(c,".")+")";return c.replace(a.number._numberPatternRE,function(c){var d={signed:!1,separator:b.strict?f:[f,""],fractional:b.fractional,decimal:g,exponent:!1},e=c.split("."),i=b.places;e.length==1&&h!=1&&(e[1]="###"),e.length==1||i===0?d.fractional=!1:(i===undefined&&(i=b.pattern?e[1].lastIndexOf("0")+1:Infinity),i&&b.fractional==undefined&&(d.fractional=!0),!b.places&&i<e[1].length&&(i+=","+e[1].length),d.places=i);var j=e[0].split(",");j.length>1&&(d.groupSize=j.pop().length,j.length>1&&(d.groupSize2=j.pop().length));return"("+a.number._realNumberRegexp(d)+")"})},!0);i&&(k=k.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(c,d,e,f){var g=["symbol","currency","displayName"][e.length-1],h=a.regexp.escapeString(b[g]||b.currency||"");d=d?"[\\s\\xa0]":"",f=f?"[\\s\\xa0]":"";if(!b.strict){d&&(d+="*"),f&&(f+="*");return"(?:"+d+h+f+")?"}return d+h+f}));return{regexp:k.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:f,decimal:g,factor:h}},a.number.parse=function(b,c){var d=a.number._parseInfo(c),e=(new RegExp("^"+d.regexp+"$")).exec(b);if(!e)return NaN;var f=e[1];if(!e[1]){if(!e[2])return NaN;f=e[2],d.factor*=-1}f=f.replace(new RegExp("["+d.group+"\\s\\xa0]","g"),"").replace(d.decimal,".");return f*d.factor},a.number._realNumberRegexp=function(b){b=b||{},"places"in b||(b.places=Infinity),typeof b.decimal!="string"&&(b.decimal=".");if(!("fractional"in b)||/^0/.test(b.places))b.fractional=[!0,!1];"exponent"in b||(b.exponent=[!0,!1]),"eSigned"in b||(b.eSigned=[!0,!1]);var c=a.number._integerRegexp(b),d=a.regexp.buildGroupRE(b.fractional,function(a){var c="";a&&b.places!==0&&(c="\\"+b.decimal,b.places==Infinity?c="(?:"+c+"\\d+)?":c+="\\d{"+b.places+"}");return c},!0),e=a.regexp.buildGroupRE(b.exponent,function(c){if(c)return"([eE]"+a.number._integerRegexp({signed:b.eSigned})+")";return""}),f=c+d;d&&(f="(?:(?:"+f+")|(?:"+d+"))");return f+e},a.number._integerRegexp=function(b){b=b||{},"signed"in b||(b.signed=[!0,!1]),"separator"in b?"groupSize"in b||(b.groupSize=3):b.separator="";var c=a.regexp.buildGroupRE(b.signed,function(a){return a?"[-+]":""},!0),d=a.regexp.buildGroupRE(b.separator,function(c){if(!c)return"(?:\\d+)";c=a.regexp.escapeString(c),c==" "?c="\\s":c==" "&&(c="\\s\\xa0");var d=b.groupSize,e=b.groupSize2;if(e){var f="(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+c+"]\\d{"+e+"})*["+c+"]\\d{"+d+"})";return d-e>0?"(?:"+f+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":f}return"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+c+"]\\d{"+d+"})*)"},!0);return c+d};return a.number})