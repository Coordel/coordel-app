define("dojo/store/Cache",["dojo"],function(a){a.getObject("store",!0,a),a.store.Cache=function(b,c,d){d=d||{};return a.delegate(b,{query:function(a,e){var f=b.query(a,e);f.forEach(function(a){(!d.isLoaded||d.isLoaded(a))&&c.put(a)});return f},queryEngine:b.queryEngine||c.queryEngine,get:function(d,e){return a.when(c.get(d),function(f){return f||a.when(b.get(d,e),function(a){a&&c.put(a,{id:d});return a})})},add:function(d,e){return a.when(b.add(d,e),function(a){return c.add(typeof a=="object"?a:d,e)})},put:function(d,e){c.remove(e&&e.id||this.getIdentity(d));return a.when(b.put(d,e),function(a){return c.put(typeof a=="object"?a:d,e)})},remove:function(d,e){return a.when(b.remove(d,e),function(a){return c.remove(d,e)})},evict:function(a){return c.remove(a)}})};return a.store.Cache})