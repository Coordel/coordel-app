define("dojo/store/JsonRest",["dojo","dojo/store/util/QueryResults"],function(a){a.declare("dojo.store.JsonRest",null,{constructor:function(b){a.mixin(this,b)},target:"",idProperty:"id",get:function(b,c){var d=c||{};d.Accept="application/javascript, application/json";return a.xhrGet({url:this.target+b,handleAs:"json",headers:d})},getIdentity:function(a){return a[this.idProperty]},put:function(b,c){console.log("in put in JsonRest Store"),c=c||{};var d="id"in c?c.id:this.getIdentity(b),e=typeof d!="undefined";return a.xhr(e&&!c.incremental?"PUT":"POST",{url:e?this.target+d:this.target,postData:a.toJson(b),handleAs:"json",headers:{"Content-Type":"application/json","If-Match":c.overwrite===!0?"*":null,"If-None-Match":c.overwrite===!1?"*":null}})},add:function(a,b){b=b||{},b.overwrite=!1;return this.put(a,b)},remove:function(b){return a.xhrDelete({url:this.target+b})},query:function(b,c){var d={Accept:"application/javascript, application/json"};c=c||{};if(c.start>=0||c.count>=0)d.Range="items="+(c.start||"0")+"-"+("count"in c&&c.count!=Infinity?c.count+(c.start||0)-1:"");a.isObject(b)&&(b=a.objectToQuery(b),b=b?"?"+b:"");if(c&&c.sort){b+=(b?"&":"?")+"sort(";for(var e=0;e<c.sort.length;e++){var f=c.sort[e];b+=(e>0?",":"")+(f.descending?"-":"+")+encodeURIComponent(f.attribute)}b+=")"}var g=a.xhrGet({url:this.target+(b||""),handleAs:"json",headers:d});g.total=g.then(function(){var a=g.ioArgs.xhr.getResponseHeader("Content-Range");return a&&(a=a.match(/\/(.*)/))&&+a[1]});return a.store.util.QueryResults(g)}});return a.store.JsonRest})