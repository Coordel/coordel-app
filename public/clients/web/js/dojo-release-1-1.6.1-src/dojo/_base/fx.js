define("dojo/_base/fx",["dojo/lib/kernel","dojo/_base/Color","dojo/_base/connect","dojo/_base/lang","dojo/_base/html"],function(a){(function(){var b=a,c=b._mixin;a._Line=function(a,b){this.start=a,this.end=b},a._Line.prototype.getValue=function(a){return(this.end-this.start)*a+this.start},a.Animation=function(a){c(this,a),b.isArray(this.curve)&&(this.curve=new b._Line(this.curve[0],this.curve[1]))},b._Animation=b.Animation,b.extend(a.Animation,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,c){var d=c||[];if(this[a])if(b.config.debugAtAllCosts)this[a].apply(this,d);else try{this[a].apply(this,d)}catch(e){console.error("exception in animation handler for:",a),console.error(e)}return this},play:function(b,c){var d=this;d._delayTimer&&d._clearTimer();if(c)d._stopTimer(),d._active=d._paused=!1,d._percent=0;else if(d._active&&!d._paused)return d;d._fire("beforeBegin",[d.node]);var e=b||d.delay,f=a.hitch(d,"_play",c);if(e>0){d._delayTimer=setTimeout(f,e);return d}f();return d},_play:function(a){var b=this;b._delayTimer&&b._clearTimer(),b._startTime=(new Date).valueOf(),b._paused&&(b._startTime-=b.duration*b._percent),b._active=!0,b._paused=!1;var c=b.curve.getValue(b._getStep());b._percent||(b._startRepeatCount||(b._startRepeatCount=b.repeat),b._fire("onBegin",[c])),b._fire("onPlay",[c]),b._cycle();return b},pause:function(){var a=this;a._delayTimer&&a._clearTimer(),a._stopTimer();if(!a._active)return a;a._paused=!0,a._fire("onPause",[a.curve.getValue(a._getStep())]);return a},gotoPercent:function(a,b){var c=this;c._stopTimer(),c._active=c._paused=!0,c._percent=a,b&&c.play();return c},stop:function(a){var b=this;b._delayTimer&&b._clearTimer();if(!b._timer)return b;b._stopTimer(),a&&(b._percent=1),b._fire("onStop",[b.curve.getValue(b._getStep())]),b._active=b._paused=!1;return b},status:function(){if(this._active)return this._paused?"paused":"playing";return"stopped"},_cycle:function(){var a=this;if(a._active){var b=(new Date).valueOf(),c=(b-a._startTime)/a.duration;c>=1&&(c=1),a._percent=c,a.easing&&(c=a.easing(c)),a._fire("onAnimate",[a.curve.getValue(c)]),a._percent<1?a._startTimer():(a._active=!1,a.repeat>0?(a.repeat--,a.play(null,!0)):a.repeat==-1?a.play(null,!0):a._startRepeatCount&&(a.repeat=a._startRepeatCount,a._startRepeatCount=0),a._percent=0,a._fire("onEnd",[a.node]),!a.repeat&&a._stopTimer())}return a},_clearTimer:function(){clearTimeout(this._delayTimer),delete this._delayTimer}});var d=0,e=null,f={run:function(){}};b.extend(b.Animation,{_startTimer:function(){this._timer||(this._timer=b.connect(f,"run",this,"_cycle"),d++),e||(e=setInterval(b.hitch(f,"run"),this.rate))},_stopTimer:function(){this._timer&&(b.disconnect(this._timer),this._timer=null,d--),d<=0&&(clearInterval(e),e=null,d=0)}});var g=b.isIE?function(a){var c=a.style;!c.width.length&&b.style(a,"width")=="auto"&&(c.width="auto")}:function(){};a._fade=function(a){a.node=b.byId(a.node);var d=c({properties:{}},a),e=d.properties.opacity={};e.start="start"in d?d.start:function(){return+b.style(d.node,"opacity")||0},e.end=d.end;var f=b.animateProperty(d);b.connect(f,"beforeBegin",b.partial(g,d.node));return f},a.fadeIn=function(a){return b._fade(c({end:1},a))},a.fadeOut=function(a){return b._fade(c({end:0},a))},a._defaultEasing=function(a){return.5+Math.sin((a+1.5)*Math.PI)/2};var h=function(a){this._properties=a;for(var c in a){var d=a[c];d.start instanceof b.Color&&(d.tempColor=new b.Color)}};h.prototype.getValue=function(a){var c={};for(var d in this._properties){var e=this._properties[d],f=e.start;f instanceof b.Color?c[d]=b.blendColors(f,e.end,a,e.tempColor).toCss():b.isArray(f)||(c[d]=(e.end-f)*a+f+(d!="opacity"?e.units||"px":0))}return c},a.animateProperty=function(a){var d=a.node=b.byId(a.node);a.easing||(a.easing=b._defaultEasing);var e=new b.Animation(a);b.connect(e,"beforeBegin",e,function(){var a={};for(var e in this.properties){if(e=="width"||e=="height")this.node.display="block";var f=this.properties[e];b.isFunction(f)&&(f=f(d)),f=a[e]=c({},b.isObject(f)?f:{end:f}),b.isFunction(f.start)&&(f.start=f.start(d)),b.isFunction(f.end)&&(f.end=f.end(d));var g=e.toLowerCase().indexOf("color")>=0;function i(a,c){var d=({height:a.offsetHeight,width:a.offsetWidth})[c];if(d!==undefined)return d;d=b.style(a,c);return c=="opacity"?+d:g?d:parseFloat(d)}"end"in f?"start"in f||(f.start=i(d,e)):f.end=i(d,e),g?(f.start=new b.Color(f.start),f.end=new b.Color(f.end)):f.start=e=="opacity"?+f.start:parseFloat(f.start)}this.curve=new h(a)}),b.connect(e,"onAnimate",b.hitch(b,"style",e.node));return e},a.anim=function(a,c,d,e,f,g){return b.animateProperty({node:a,duration:d||b.Animation.prototype.duration,properties:c,easing:e,onEnd:f}).play(g||0)}})();return a.animateProperty})