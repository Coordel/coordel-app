define("dojo/_base/connect",["dojo/lib/kernel","dojo/_base/lang"],function(a){a._listener={getDispatcher:function(){return function(){var a=Array.prototype,b=arguments.callee,c=b._listeners,d=b.target,e=d&&d.apply(this,arguments),f,g=[].concat(c);for(f in g)f in a||g[f].apply(this,arguments);return e}},add:function(b,c,d){b=b||a.global;var e=b[c];if(!e||!e._listeners){var f=a._listener.getDispatcher();f.target=e,f._listeners=[],e=b[c]=f}return e._listeners.push(d)},remove:function(b,c,d){var e=(b||a.global)[c];e&&e._listeners&&d--&&delete e._listeners[d]}},a.connect=function(b,c,d,e,f){var g=arguments,h=[],i=0;h.push(a.isString(g[0])?null:g[i++],g[i++]);var j=g[i+1];h.push(a.isString(j)||a.isFunction(j)?g[i++]:null,g[i++]);for(var k=g.length;i<k;i++)h.push(g[i]);return a._connect.apply(this,h)},a._connect=function(b,c,d,e){var f=a._listener,g=f.add(b,c,a.hitch(d,e));return[b,c,g,f]},a.disconnect=function(b){b&&b[0]!==undefined&&(a._disconnect.apply(this,b),delete b[0])},a._disconnect=function(a,b,c,d){d.remove(a,b,c)},a._topics={},a.subscribe=function(b,c,d){return[b,a._listener.add(a._topics,b,a.hitch(c,d))]},a.unsubscribe=function(b){b&&a._listener.remove(a._topics,b[0],b[1])},a.publish=function(b,c){var d=a._topics[b];d&&d.apply(this,c||[])},a.connectPublisher=function(b,c,d){var e=function(){a.publish(b,arguments)};return d?a.connect(c,d,e):a.connect(c,e)};return a.connect})