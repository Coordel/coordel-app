function runBatchParse(a,b,c){var d=null,e,f=0,g=null==a.pattern?"default":a.pattern;for(;f<b.length;f++)try{e=dojo.number.parse(b[f],a);if(isNaN(e))throw'"'+b[f]+'" is parsed to NaN with pattern '+g}catch(h){d=h;break}if(!c&&d==null)throw"runBatchParse() - stric parse failed, no exception when parsing illegal data";if(d!=null){if(!c&&f==0)return;throw"runBatchParse() failed: "+d}}dojo.provide("tests.number"),dojo.require("dojo.number"),tests.number.check=function(a,b,c,d){tests.number.checkFormatParseCycle(a,a,b,c,d,!1),tests.number.checkParse(a,a,b,d,c)},tests.number.checkFormatParseCycle=function(a,b,c,d,e){if(null!=b)var f=b.pattern,g=b.locale;var h=null==f?"default":f,i=dojo.number.format(c,b);null!=d&&a.is(d,i);if(e){var j=dojo.number.parse(i,b);tests.number._decimalNumberDiff(c,j)||a.is(c,j);var k=dojo.number.format(j,b);tests.number._decimalNumberDiff(i,k)||a.is(i,k)}},tests.number.checkParse=function(a,b,c,d){var e="default";null!=b&&null!=b.pattern&&(e=b.pattern);var f=dojo.number.parse(c,b);null!=d&&a.is(d,f)},tests.number.rounding=function(a,b,c,d){var e="#0.";for(var f=0;f<c;f++)e+="#";var g=dojo.number.format(b,{locale:tests.number.locale,pattern:e});a.is(d,g)},tests.number._decimalNumberDiff=function(a,b){var c=.001,d=a-b;if(Math.abs(d)<c)return!0;if(isNaN(Math.abs(d))){var e=a.toString().split(b);e[1]=e[1].replace(",","0"),e[1]=e[1].replace("٫","0");return new Number(e[1])<c}return!1},tests.register("tests.number",[{name:"number",runTest:function(a){var b=["en-us","fr-fr","de-de"];tests.number.locale="en-us";if(dojo.global.define&&define.vendor!="dojotoolkit.org"){var c=new doh.Deferred,d=[];dojo.forEach(b,function(a){d.push(dojo.getL10nName("dojo/cldr","number",a))}),define(d,function(){c.callback(!0)});return c}for(var e=0;e<b.length;e++)dojo.requireLocalization("dojo.cldr","number",b[e])}},{name:"invalid",runTest:function(a){a.t(null===dojo.number.format(NaN)),a.t(null===dojo.number.format(Number.NaN)),a.t(null===dojo.number.format(Infinity)),a.t(null===dojo.number.format(-Infinity))}},{name:"round",runTest:function(a){a.is(0,dojo.number.round(0)),a.is(1,dojo.number.round(.5)),a.is(-1,dojo.number.round(-.5)),a.is(.1,dojo.number.round(.05,1)),a.is(-.1,dojo.number.round(-.05,1)),a.is(1.1,dojo.number.round(1.05,1)),a.is(-1.1,dojo.number.round(-1.05,1))}},{name:"round_multiple",runTest:function(a){a.is("123.455",dojo.number.round(123.4525,2,5)),a.is("123.45",dojo.number.round(123.452,2,5)),a.is("123.455",dojo.number.round(123.454,2,5)),a.is("123.455",dojo.number.round(123.456,2,5)),a.is("-123.45",dojo.number.round(-123.452,2,5)),a.is("-123.455",dojo.number.round(-123.4525,2,5)),a.is("-123.455",dojo.number.round(-123.454,2,5)),a.is("-123.455",dojo.number.round(-123.456,2,5))}},{name:"round_speleotrove",runTest:function(a){a.is(12345,dojo.number.round(12345+ -.1),"radx200"),a.is(12345,dojo.number.round(12345+ -.01),"radx201"),a.is(12345,dojo.number.round(12345+ -.001),"radx202"),a.is(12345,dojo.number.round(12345+ -1e-5),"radx203"),a.is(12345,dojo.number.round(12345+ -1e-6),"radx204"),a.is(12345,dojo.number.round(12345+ -1e-7),"radx205"),a.is(12345,dojo.number.round(12345),"radx206"),a.is(12345,dojo.number.round(12345+1e-7),"radx207"),a.is(12345,dojo.number.round(12345+1e-6),"radx208"),a.is(12345,dojo.number.round(12345+1e-5),"radx209"),a.is(12345,dojo.number.round(12345+1e-4),"radx210"),a.is(12345,dojo.number.round(12345.001),"radx211"),a.is(12345,dojo.number.round(12345.01),"radx212"),a.is(12345,dojo.number.round(12345.1),"radx213"),a.is(12346,dojo.number.round(12346.49999),"radx215"),a.is(12347,dojo.number.round(12346.5),"radx216"),a.is(12347,dojo.number.round(12346.50001),"radx217"),a.is(12345,dojo.number.round(12345.4),"radx220"),a.is(12345,dojo.number.round(12345.49),"radx221"),a.is(12345,dojo.number.round(12345.499),"radx222"),a.is(12345,dojo.number.round(12345.49999),"radx223"),a.is(12346,dojo.number.round(12345.5),"radx224"),a.is(12346,dojo.number.round(12345.50001),"radx225"),a.is(12346,dojo.number.round(12345.5001),"radx226"),a.is(12346,dojo.number.round(12345.501),"radx227"),a.is(12346,dojo.number.round(12345.51),"radx228"),a.is(12346,dojo.number.round(12345.6),"radx229"),a.is(-12345,dojo.number.round(-12345+ -.1),"rsux200"),a.is(-12345,dojo.number.round(-12345+ -.01),"rsux201"),a.is(-12345,dojo.number.round(-12345+ -.001),"rsux202"),a.is(-12345,dojo.number.round(-12345+ -1e-5),"rsux203"),a.is(-12345,dojo.number.round(-12345+ -1e-6),"rsux204"),a.is(-12345,dojo.number.round(-12345+ -1e-7),"rsux205"),a.is(-12345,dojo.number.round(-12345+0),"rsux206"),a.is(-12345,dojo.number.round(-12345+1e-7),"rsux207"),a.is(-12345,dojo.number.round(-12345+1e-6),"rsux208"),a.is(-12345,dojo.number.round(-12345+1e-5),"rsux209"),a.is(-12345,dojo.number.round(-12345+1e-4),"rsux210"),a.is(-12345,dojo.number.round(-12345+.001),"rsux211"),a.is(-12345,dojo.number.round(-12345+.01),"rsux212"),a.is(-12345,dojo.number.round(-12345+.1),"rsux213"),a.is(-12346,dojo.number.round(-12346+.49999),"rsux215"),a.is(-12346,dojo.number.round(-12346+.5),"rsux216"),a.is(-12345,dojo.number.round(-12346+.50001),"rsux217"),a.is(-12345,dojo.number.round(-12345+.4),"rsux220"),a.is(-12345,dojo.number.round(-12345+.49),"rsux221"),a.is(-12345,dojo.number.round(-12345+.499),"rsux222"),a.is(-12345,dojo.number.round(-12345+.49999),"rsux223"),a.is(-12345,dojo.number.round(-12345+.5),"rsux224"),a.is(-12344,dojo.number.round(-12345+.50001),"rsux225"),a.is(-12344,dojo.number.round(-12345+.5001),"rsux226"),a.is(-12344,dojo.number.round(-12345+.501),"rsux227"),a.is(-12344,dojo.number.round(-12345+.51),"rsux228"),a.is(-12344,dojo.number.round(-12345+.6),"rsux229"),a.is(12345,dojo.number.round(12345),"rdvx401"),a.is(12344,dojo.number.round(12345/1.0001),"rdvx402"),a.is(12333,dojo.number.round(12345/1.001),"rdvx403"),a.is(12223,dojo.number.round(12345/1.01),"rdvx404"),a.is(11223,dojo.number.round(12345/1.1),"rdvx405"),a.is(3088.8,dojo.number.round(12355/4,1),"rdvx406"),a.is(3086.3,dojo.number.round(12345/4,1),"rdvx407"),a.is(3088.7,dojo.number.round(12355/4.0001,1),"rdvx408"),a.is(3086.2,dojo.number.round(12345/4.0001,1),"rdvx409"),a.is(2519.4,dojo.number.round(12345/4.9,1),"rdvx410"),a.is(2473.9,dojo.number.round(12345/4.99,1),"rdvx411"),a.is(2469.5,dojo.number.round(12345/4.999,1),"rdvx412"),a.is(2469,dojo.number.round(12345/4.9999,1),"rdvx413"),a.is(2469,dojo.number.round(2469,1),"rdvx414"),a.is(2469,dojo.number.round(12345/5.0001,1),"rdvx415"),a.is(2468.5,dojo.number.round(12345/5.001,1),"rdvx416"),a.is(2464.1,dojo.number.round(12345/5.01,1),"rdvx417"),a.is(2420.6,dojo.number.round(12345/5.1,1),"rdvx418"),a.is(12345,dojo.number.round(12345),"rmux401"),a.is(12346,dojo.number.round(12346.2345),"rmux402"),a.is(12357,dojo.number.round(12357.345),"rmux403"),a.is(12468,dojo.number.round(12468.45),"rmux404"),a.is(13580,dojo.number.round(12345*1.1),"rmux405"),a.is(49380,dojo.number.round(49380),"rmux406"),a.is(49381,dojo.number.round(49381.2345),"rmux407"),a.is(60491,dojo.number.round(12345*4.9),"rmux408"),a.is(61602,dojo.number.round(61601.55),"rmux409"),a.is(61713,dojo.number.round(61712.655),"rmux410"),a.is(61724,dojo.number.round(61723.7655),"rmux411"),a.is(61725,dojo.number.round(61725),"rmux412"),a.is(61726,dojo.number.round(61726.2345),"rmux413"),a.is(61737,dojo.number.round(61737.345),"rmux414"),a.is(61848,dojo.number.round(61848.45),"rmux415")}},{name:"format",runTest:function(a){a.is("0123",dojo.number.format(123,{pattern:"0000"})),a.is("-12,34,567.890",dojo.number.format(-1234567.89,{pattern:"#,##,##0.000##",locale:"en-us"})),a.is("-12,34,567.89012",dojo.number.format(-1234567.890123,{pattern:"#,##,##0.000##",locale:"en-us"})),a.is("(1,234,567.89012)",dojo.number.format(-1234567.890123,{pattern:"#,##0.000##;(#,##0.000##)",locale:"en-us"})),a.is("(1,234,567.89012)",dojo.number.format(-1234567.890123,{pattern:"#,##0.000##;(#)",locale:"en-us"})),a.is("50.1%",dojo.number.format(.501,{pattern:"#0.#%",locale:"en-us"})),a.is("98",dojo.number.format(1998,{pattern:"00"})),a.is("01998",dojo.number.format(1998,{pattern:"00000"})),a.is("0.13",dojo.number.format(.125,{pattern:"0.##",locale:"en-us"})),a.is("0.1250",dojo.number.format(.125,{pattern:"0.0000",locale:"en-us"})),a.is("0.1",dojo.number.format(.100004,{pattern:"0.####",locale:"en-us"})),a.is("-12",dojo.number.format(-12.3,{places:0,locale:"en-us"})),a.is("-1,234,567.89",dojo.number.format(-1234567.89,{locale:"en-us"})),a.is("-1,234,568",dojo.number.format(-1234567.89,{places:0,locale:"en-us"})),a.is("-1 000,10",dojo.number.format(-1000.1,{places:2,locale:"fr-fr"})),a.is("-1,000.10",dojo.number.format(-1000.1,{places:2,locale:"en-us"})),a.is("-1 000,10",dojo.number.format(-1000.1,{places:2,locale:"fr-fr"})),a.is("-1.234,56",dojo.number.format(-1234.56,{places:2,locale:"de-de"})),a.is("-1,000.10",dojo.number.format(-1000.1,{places:2,locale:"en-us"})),a.is("123.46%",dojo.number.format(1.23456,{places:2,locale:"en-us",type:"percent"})),a.is("123.4",dojo.number.format(123.4,{places:"1,3",locale:"en-us"})),a.is("123.45",dojo.number.format(123.45,{places:"1,3",locale:"en-us"})),a.is("123.456",dojo.number.format(123.456,{places:"1,3",locale:"en-us"})),a.is("-1,234,568",dojo.number.format(-1234567.89,{places:0,locale:"en-us"})),a.is("-1,000.11",dojo.number.format(-1000.114,{places:2,locale:"en-us"})),a.is("-1,000.12",dojo.number.format(-1000.115,{places:2,locale:"en-us"})),a.is("-1,000.12",dojo.number.format(-1000.116,{places:2,locale:"en-us"})),a.is("-0.00",dojo.number.format(-1e-4,{places:2,locale:"en-us"})),a.is("0.00",dojo.number.format(0,{places:2,locale:"en-us"})),a.is("-1 000,100",dojo.number.format(-1000.1,{places:3,locale:"fr-fr"})),a.is("-1,000.100",dojo.number.format(-1000.1,{places:3,locale:"en-us"}))}},{name:"parse",runTest:function(a){a.is(1e3,dojo.number.parse("1000",{locale:"en-us"})),a.is(1000.123,dojo.number.parse("1000.123",{locale:"en-us"})),a.is(1e3,dojo.number.parse("1,000",{locale:"en-us"})),a.is(-1e3,dojo.number.parse("-1000",{locale:"en-us"})),a.is(-1000.123,dojo.number.parse("-1000.123",{locale:"en-us"})),a.is(-1234567.89,dojo.number.parse("-1,234,567.89",{locale:"en-us"})),a.is(-1234567.89,dojo.number.parse("-1 234 567,89",{locale:"fr-fr"})),a.t(isNaN(dojo.number.parse("-1 234 567,89",{locale:"en-us"}))),a.is(123,dojo.number.parse("0123",{pattern:"0000"})),a.t(isNaN(dojo.number.parse("10,00",{locale:"en-us"}))),a.t(isNaN(dojo.number.parse("1000.1",{locale:"fr-fr"}))),a.t(isNaN(dojo.number.parse(""))),a.t(isNaN(dojo.number.parse("abcd"))),a.is(1.23456789,dojo.number.parse("1.23456789",{locale:"en-us"})),a.is(1.23,dojo.number.parse("123%",{locale:"en-us",type:"percent"})),a.is(1.23,dojo.number.parse("123%",{places:0,locale:"en-us",type:"percent"})),a.t(isNaN(dojo.number.parse("123.46%",{places:0,locale:"en-us",type:"percent"}))),a.is(1.2346,dojo.number.parse("123.46%",{places:2,locale:"en-us",type:"percent"})),a.is(.501,dojo.number.parse("50.1%",{pattern:"#0.#%",locale:"en-us"})),a.is(123.4,dojo.number.parse("123.4",{pattern:"#0.#",locale:"en-us"})),a.is(-123.4,dojo.number.parse("-123.4",{pattern:"#0.#",locale:"en-us"})),a.is(123.4,dojo.number.parse("123.4",{pattern:"#0.#;(#0.#)",locale:"en-us"})),a.is(-123.4,dojo.number.parse("(123.4)",{pattern:"#0.#;(#0.#)",locale:"en-us"})),a.is(null,dojo.number.format("abcd",{pattern:"0000"})),a.is(123,dojo.number.parse("123",{places:0})),a.is(123,dojo.number.parse("123",{places:"0"})),a.is(123.4,dojo.number.parse("123.4",{places:1,locale:"en-us"})),a.is(123.45,dojo.number.parse("123.45",{places:"1,3",locale:"en-us"})),a.is(123.45,dojo.number.parse("123.45",{places:"0,2",locale:"en-us"}))}},{name:"format_icu4j3_6",runTest:function(a){dojo.number.format("123456789")}},{name:"format_patterns",runTest:function(a){var b=["#0.#","#0.","#.0","#"],c=b.length,d=["0","0","0.0","0"],e;for(var f=0;f<c;++f)e={pattern:b[f],locale:"en-us"},tests.number.checkFormatParseCycle(a,e,0,d[f],!1)}},{name:"exponential",runTest:function(a){}},{name:"format_quotes",runTest:function(a){}},{name:"format_rounding",runTest:function(a){tests.number.rounding(a,179999e-9,5,"0.00018"),tests.number.rounding(a,99e-5,4,"0.001"),tests.number.rounding(a,17.6995,3,"17.7"),tests.number.rounding(a,15.3999,0,"15"),tests.number.rounding(a,-29.6,0,"-30")}},{name:"format_scientific",runTest:function(a){}},{name:"format_perMill",runTest:function(a){var b,c,d;b="###.###‰",d="485.7‰",c=dojo.number.format(.4857,{pattern:b,locale:"en-us"}),a.is(d,c)}},{name:"format_grouping",runTest:function(a){var b=123456789,c="12,34,56,789",d={pattern:"#,##,###",locale:"en-us"};tests.number.checkFormatParseCycle(a,d,b,c,!0)}},{name:"format_pad",runTest:function(a){}},{name:"parse_icu4j3_6",runTest:function(a){var b="00",c="0.0",d=dojo.number.parse(c,{pattern:b,locale:"en-us"}),e={locale:"en-us"},f=["0","0.0","1234567","1,234,567"];runBatchParse(e,f,!0);var g=["0,456","1,2",",0",",1",",.02","1,.02","1,,200","1,45","1,45.34","1234,567","12,34,567","1,23,456,7890"];runBatchParse(e,g,!1),e={pattern:"#,##,##0.#",locale:"en-us"};var h=["12,34,567"];runBatchParse(e,h,!0);var i=["12,34,56","12,34,56,"];runBatchParse(e,i,!1)}},{name:"parse_whitespace",runTest:function(a){}},{name:"number_regression_1",runTest:function(a){tests.number.checkFormatParseCycle(a,{pattern:"#0.#",locale:"en-us"},-.09,"-0.1",!1)}},{name:"number_regression_2",runTest:function(a){}},{name:"number_regression_3",runTest:function(a){tests.number.checkFormatParseCycle(a,{places:0},0,"0",!1),tests.number.checkFormatParseCycle(a,{places:0},.1,"0",!1),tests.number.checkParse(a,{pattern:"#0.#####",locale:"en-us"},123.55456,123.55456),tests.number.checkFormatParseCycle(a,{pattern:"#.#"},0,"0",!1),tests.number.checkParse(a,{locale:"en-us"},"99.99",99.99),tests.number.checkFormatParseCycle(a,{pattern:"#.#"},0,"0",!1)}},{name:"number_regression_4",runTest:function(a){tests.number.checkFormatParseCycle(a,{places:0},123,"123",!1),tests.number.checkFormatParseCycle(a,{locale:"en-us"},-0,"0",!1),tests.number.checkFormatParseCycle(a,{locale:"en-us",places:6},-1e-4,"-0.000100",!1)}},{name:"number_regression_5",runTest:function(a){}},{name:"number_regression_6",runTest:function(a){var b="###.00;(###.00)",c="fr",d={pattern:b,locale:c};tests.number.checkFormatParseCycle(a,d,1234,"1234,00",!1),tests.number.checkFormatParseCycle(a,d,-1234,"(1234,00)",!1),b="#,###.00;(#,###.00)",d={pattern:b,locale:c},tests.number.checkFormatParseCycle(a,d,1234,"1 234,00",!1),tests.number.checkFormatParseCycle(a,d,-1234,"(1 234,00)",!1)}},{name:"number_regression_7",runTest:function(a){}},{name:"number_regression_8",runTest:function(a){var b=["#0000","#000","#00","#0","#"],c=["0042","042","42","42","42"];for(var d=0;d<b.length;d++)tests.number.checkFormatParseCycle(a,{pattern:b[d]},42,c[d],!1),tests.number.checkFormatParseCycle(a,{pattern:b[d]},-42,"-"+c[d],!1);tests.number.checkFormatParseCycle(a,{pattern:"#,#00.00;-#.#",locale:"en-us"},3456.78,"3,456.78",!1)}},{name:"number_regression_9",runTest:function(a){tests.number.checkParse(a,{pattern:"#,#00.00"},"abc3"),tests.number.checkParse(a,null,"hello: ,.#$@^&**10x")}},{name:"number_regression_10",runTest:function(a){tests.number.checkFormatParseCycle(a,{pattern:"000.00",locale:"en-us"},12.34,"012.34",!1),tests.number.checkFormatParseCycle(a,{pattern:"+000.00%;-000.00%",locale:"en-us"},.1234,"+012.34%",!1),tests.number.checkFormatParseCycle(a,{pattern:"##,###,###.00",locale:"en-us"},9.02,"9.02",!1);var b=["#.00","0.00","00.00","#0.0#","#0.00"],c=["1.20","1.20","01.20","1.2","1.20"];for(var d=0;d<b.length;d++)tests.number.checkFormatParseCycle(a,{pattern:b[d],locale:"en-us"},1.2,c[d],!1)}},{name:"number_regression_11",runTest:function(a){}},{name:"number_regression_12",runTest:function(a){}}])