dojo.provide("tests._base.lang"),tests.register("tests._base.lang",[function mixin(a){a.assertEqual("object",typeof dojo.mixin()),a.assertEqual("object",typeof dojo.mixin(undefined)),a.assertEqual("object",typeof dojo.mixin(null));var b={foo:function(){a.debug("foo")},bar:"bar"},c={};dojo.mixin(c,b),a.assertEqual("function",typeof c.foo),a.assertEqual("string",typeof c.bar)},function extend(a){function c(){}var b={foo:function(){a.debug("foo")},bar:"bar"};dojo.extend(c,b);var d=new c;a.assertEqual("function",typeof d.foo),a.assertEqual("string",typeof d.bar)},function isFunction(a){a.assertTrue(dojo.isFunction(new Function)),a.assertTrue(dojo.isFunction(isFunction)),dojo.isBrowser&&(a.assertFalse(dojo.isFunction(dojo.doc.getElementsByName("html"))),a.assertFalse(dojo.isFunction(dojo.doc.createElement("object"))))},function isObject(a){a.assertFalse(dojo.isObject(!0)),a.assertFalse(dojo.isObject(!1)),a.assertFalse(dojo.isObject("foo")),a.assertTrue(dojo.isObject(new String("foo"))),a.assertTrue(dojo.isObject(null)),a.assertTrue(dojo.isObject({})),a.assertTrue(dojo.isObject([])),a.assertTrue(dojo.isObject([]))},function isArray(a){a.assertTrue(dojo.isArray([])),a.assertTrue(dojo.isArray([])),a.assertFalse(dojo.isArray({}))},function isArrayLike(a){a.assertFalse(dojo.isArrayLike("thinger")),a.assertTrue(dojo.isArrayLike([])),a.assertFalse(dojo.isArrayLike({})),a.assertTrue(dojo.isArrayLike(arguments))},function isString(a){a.assertFalse(dojo.isString(!0)),a.assertFalse(dojo.isString(!1)),a.assertTrue(dojo.isString("foo")),a.assertTrue(dojo.isString(new String("foo"))),a.assertFalse(dojo.isString(null)),a.assertFalse(dojo.isString({})),a.assertFalse(dojo.isString([]))},function partial(a){function d(a,b){return[this.foo,a,b]}var b={foo:"bar"},c={foo:"baz"},e=dojo.partial(d);a.assertEqual("bar",e.call(b)[0]),a.assertEqual(undefined,e()[0]);var f=dojo.partial(d,"foo","bar");a.assertEqual("bar",f()[2]);var g=dojo.partial(d,"foo","bar")},function nestedPartial(a){function b(a,b){return[a,b]}var c=dojo.partial(b,"foo");a.assertEqual(undefined,c()[1]),a.assertEqual("bar",c("bar")[1]);var d=dojo.partial(c,"thud");a.assertEqual("foo",d()[0]),a.assertEqual("thud",d()[1])},function hitch(a){function d(){return[this.foo,arguments.length]}var b={foo:"bar"},c={foo:"baz"},e=dojo.hitch(b,d);a.assertEqual("bar",e()[0]),a.assertEqual(0,e()[1]);var f=dojo.hitch(c,d);a.assertEqual("baz",f()[0]),a.assertEqual(0,e()[1]),a.assertEqual(1,e("blah")[1]),a.assertEqual("baz",f.call(b)[0])},function hitchWithArgs(a){function d(){return[this.foo,arguments.length]}var b={foo:"bar"},c={foo:"baz"},e=dojo.hitch(b,d,"foo","bar");a.assertEqual("bar",e()[0]),a.assertEqual(2,e()[1]);var f=dojo.hitch(c,d,"foo","bar");a.assertEqual("baz",f()[0]),a.assertEqual(2,f()[1])},function hitchAsPartial(a){function d(a,b){return[this.foo,a,b]}var b={foo:"bar"},c={foo:"baz"},e=dojo.hitch(null,d);a.assertEqual("bar",e.call(b)[0]),a.assertEqual(undefined,e()[0]);var f=dojo.hitch(null,d,"foo","bar");a.assertEqual("bar",f()[2]);var g=dojo.hitch(null,d,"foo","bar")},function _toArray(a){function c(){return dojo._toArray(arguments)}var b=["foo","bar","spam","ham"],d=c.apply(this,b);a.assertEqual(b[0],d[0]);if(dojo.isBrowser){var e=document.createElement("div");e.innerHTML="<a href='#'>link</a>text";var f=dojo._toArray(e.childNodes);a.is(2,f.length)}},function clone(a){var b={foo:"bar",answer:42,jan102007:new Date(2007,0,10),baz:{a:null,b:[1,"b",2.3,!0,!1],c:{d:undefined,e:99,f:function(){console.log(42);return 42},g:/\d+/gm}},toString:function(){return"meow"}},c=dojo.clone(b);a.assertEqual(b.foo,c.foo),a.assertEqual(b.answer,c.answer),a.assertEqual(b.jan102007,c.jan102007),a.assertEqual(b.baz.a,c.baz.a);for(var d=0;d<b.baz.b.length;++d)a.assertEqual(b.baz.b[d],c.baz.b[d]);a.assertEqual(b.baz.c.d,c.baz.c.d),a.assertEqual(b.baz.c.e,c.baz.c.e),a.assertEqual(b.baz.c.f,c.baz.c.f),a.assertEqual(b.baz.c.f(),c.baz.c.f()),a.assertEqual(b.baz.c.g,c.baz.c.g),a.assertEqual(b.toString,c.toString),a.assertEqual(b.toString(),c.toString())},function delegate(a){var b={x:1,y:function(){return 2},z1:99},c={x:11,y:function(){return 12},z2:33,toString:function(){return"bark!"},toLocaleString:function(){return"le bark-s!"}};a.is(1,b.x),a.is(2,b.y()),a.is(99,b.z1);var d=dojo.delegate(b,c);a.is(1,b.x),a.is(2,b.y()),a.is(99,b.z1),a.is(11,d.x),a.is(12,d.y()),a.is("bark!",d.toString()),a.is("le bark-s!",d.toLocaleString()),a.is(99,d.z1),a.is(33,d.z2)},function replace(a){function d(a){var b=0;dojo.forEach(a,function(a){b+=a});return b}var b=dojo.replace("Hello, {name.first} {name.last} AKA {nick}!",{nick:"Bob",name:{first:"Robert",middle:"X",last:"Cringely"}});a.is("Hello, Robert Cringely AKA Bob!",b);var c=dojo.replace("Hello, {0} {2}!",["Robert","X","Cringely"]);a.is("Hello, Robert Cringely!",c);var e=dojo.replace("{count} payments averaging {avg} USD per payment.",dojo.hitch({payments:[11,16,12]},function(a,b){switch(b){case"count":return this.payments.length;case"min":return Math.min.apply(Math,this.payments);case"max":return Math.max.apply(Math,this.payments);case"sum":return d(this.payments);case"avg":return d(this.payments)/this.payments.length}return""}));a.is("3 payments averaging 13 USD per payment.",e);var f=dojo.replace("Hello, ${0} ${2}!",["Robert","X","Cringely"],/\$\{([^\}]+)\}/g);a.is("Hello, Robert Cringely!",f)}])