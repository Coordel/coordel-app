dojo.provide("tests.hash"),dojo.require("dojo.hash"),function(){function b(){var a=location.href,b=a.indexOf("#");return b>=0?a.substring(b+1):""}function a(a){a=a||"",location.replace("#"+a)}tests.register("tests.hash",[{name:"Getting an empty hash",setUp:function(){a()},runTest:function(a){a.is("",dojo.hash())}},{name:"Setting an empty hash",setUp:function(){dojo.hash("")},runTest:function(a){a.is("",b())}},{name:"Getting the hash of 'test'",setUp:function(){a("test")},runTest:function(a){a.is("test",dojo.hash())},tearDown:function(){a()}},{name:"Setting the hash to 'test'",setUp:function(){dojo.hash("test")},runTest:function(a){a.is("test",b())},tearDown:function(){a()}},{name:"Getting the hash of 'test%20with%20spaces'",setUp:function(){a("test%20with%20spaces")},runTest:function(a){a.is("test%20with%20spaces",dojo.hash())},tearDown:function(){a()}},{name:"Setting the hash of 'test%20with%20spaces'",setUp:function(){a("test%20with%20spaces")},runTest:function(a){a.is("test%20with%20spaces",b())},tearDown:function(){a()}},{name:"Getting the hash of 'test%23with%23encoded%23hashes'",setUp:function(){a("test%23with%23encoded%23hashes")},runTest:function(a){a.is("test%23with%23encoded%23hashes",dojo.hash())},tearDown:function(){a()}},{name:"Setting the hash of 'test%23with%23encoded%23hashes'",setUp:function(){a("test%23with%23encoded%23hashes")},runTest:function(a){a.is("test%23with%23encoded%23hashes",b())},tearDown:function(){a()}},{name:"Getting the hash of 'test+with+pluses'",setUp:function(){a("test+with+pluses")},runTest:function(a){a.is("test+with+pluses",dojo.hash())},tearDown:function(){a()}},{name:"Setting the hash to 'test+with+pluses'",setUp:function(){dojo.hash("test+with+pluses")},runTest:function(a){a.is("test+with+pluses",b())},tearDown:function(){a()}},{name:"Getting the hash of '%20leadingSpace'",setUp:function(){a("%20leadingSpace")},runTest:function(a){a.is("%20leadingSpace",dojo.hash())},tearDown:function(){a()}},{name:"Setting the hash to '%20leadingSpace'",setUp:function(){dojo.hash("%20leadingSpace")},runTest:function(a){a.is("%20leadingSpace",b())},tearDown:function(){a()}},{name:"Getting the hash of 'trailingSpace%20'",setUp:function(){a("trailingSpace%20")},runTest:function(a){a.is("trailingSpace%20",dojo.hash())},tearDown:function(){a()}},{name:"Setting the hash to 'trailingSpace%20'",setUp:function(){dojo.hash("trailingSpace%20")},runTest:function(a){a.is("trailingSpace%20",b())},tearDown:function(){a()}},{name:"Getting the hash of 'under_score'",setUp:function(){a("under_score")},runTest:function(a){a.is("under_score",dojo.hash())},tearDown:function(){a()}},{name:"Setting the hash to 'under_score'",setUp:function(){dojo.hash("under_score")},runTest:function(a){a.is("under_score",b())},tearDown:function(){a()}},{name:"Getting the hash of 'extra&instring'",setUp:function(){a("extra&instring")},runTest:function(a){a.is("extra&instring",dojo.hash())},tearDown:function(){a()}},{name:"Setting the hash to 'extra&instring'",setUp:function(){dojo.hash("extra&instring")},runTest:function(a){a.is("extra&instring",b())},tearDown:function(){a()}},{name:"Getting the hash of 'extra?instring'",setUp:function(){a("extra?instring")},runTest:function(a){a.is("extra?instring",dojo.hash())},tearDown:function(){a()}},{name:"Setting the hash of 'extra?instring'",setUp:function(){dojo.hash("extra?instring")},runTest:function(a){a.is("extra?instring",b())},tearDown:function(){a()}},{name:"Getting the hash resembling a query parameter ('?testa=3&testb=test')",setUp:function(){a("?testa=3&testb=test")},runTest:function(a){a.is("?testa=3&testb=test",dojo.hash())},tearDown:function(){a()}},{name:"Setting the hash resembling a query parameter ('?testa=3&testb=test')",setUp:function(){dojo.hash("?testa=3&testb=test")},runTest:function(a){a.is("?testa=3&testb=test",b())},tearDown:function(){a()}},{name:"Setting the hash to '#leadingHash' should result in the hash being 'leadingHash'",setUp:function(){dojo.hash("#leadingHash")},runTest:function(a){a.is("leadingHash",b())},tearDown:function(){a()}},{_s:null,name:"Hash change publishes to '/dojo/hashchange'",setUp:function(b){a()},runTest:function(a){var b=new doh.Deferred;this._s=dojo.subscribe("/dojo/hashchange",null,function(a){try{doh.assertEqual("test",a),b.callback(!0)}catch(c){b.errback(c)}}),dojo.hash("test");return b},tearDown:function(){dojo.unsubscribe(this._s),a()}}])}()