define(["env!env/file","uglifyjs/index"],function(a,b){var c={depRegExp:/require\s*\(\s*["']([\w-_\.\/]+)["']\s*\)/g,useRhino:!0,useLog:!0,convertDir:function(b,d){var e,f,g=/\.js$/,h,i,j;e=a.getFilteredFileList(b,/\w/,!0),b=b.replace(/\\/g,"/"),d=d.replace(/\\/g,"/"),b.charAt(b.length-1)==="/"&&(b=b.substring(0,b.length-1)),d.charAt(d.length-1)==="/"&&(d=d.substring(0,d.length-1));if(e&&e.length)for(f=0;h=e[f];f++)i=h.replace(b,d),g.test(h)?(j=a.readFile(h),j=c.convert(h,j),a.saveUtf8File(i,j)):a.copyFile(h,i,!0);else c.useLog&&(b==="convert"?console.log("\n\n"+c.convert(d,a.readFile(d))):console.log("No files to convert in directory: "+b))},removeComments:function(a,c){return b.uglify.gen_code(b.parser.parse(a),!0)},defRegExp:/(require\s*\.\s*def|define)\s*\(/,rjsRegExp:/require\s*\(\s*(\[|function)/,convert:function(a,b,d){try{var e=[],f,g,h=c.removeComments(b,a);if(c.defRegExp.test(h)||c.rjsRegExp.test(h))return b;c.depRegExp.lastIndex=0;if(!d)while(g=c.depRegExp.exec(h))f=g[1],f&&e.push('"'+f+'"');b='define(["require", "exports", "module"'+(e.length?", "+e.join(","):"")+"], function(require, exports, module) {\n"+b+"\n});\n"}catch(i){console.log("COULD NOT CONVERT: "+a+", so skipping it. Error was: "+i);return b}return b}};return c})