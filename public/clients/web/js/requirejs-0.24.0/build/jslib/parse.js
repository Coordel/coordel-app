define(["uglifyjs/index"],function(a){function j(a){var b=null;a&&(b=i.nodeToString(a));return b}function i(a,c){var d=[],e=null,f=b.parse(c);i.recurse(f,d),d.length&&(e=d.join("\n"));return e}function h(a){var b,c,d;if(g(a)||a[0]==="function")return!0;if(!f(a))return!1;b=a[1];for(c=0;c<b.length;c++){d=b[c];if(d[0]!=="string")return!1}return!0}function g(a){return a[0]==="object"}function f(a){return a[0]==="array"}var b=a.parser,c=a.uglify,d=Object.prototype.toString,e;Array.isArray?e=Array.isArray:e=function(a){return d.call(a)==="[object Array]"},i.isArray=e,i.isObjectLiteral=g,i.isArrayLiteral=f,i.recurse=function(a,b){var c,d,f;if(e(a))for(c=0;c<a.length;c++)d=a[c],e(d)&&(f=this.parseNode(d),f&&b.push(f),this.recurse(d,b))},i.definesRequire=function(a,c){var d=b.parse(c);return this.nodeHasRequire(d)},i.getAnonDeps=function(a,c){var d=b.parse(c),e=[],f=this.findAnonRequireDefCallback(d);f&&(this.findRequireDepNames(f,e),e=["require","exports","module"].concat(e));return e},i.findAnonRequireDefCallback=function(a){var b,c,d,f,g;if(e(a)){if(a[0]==="call"){f=a[1],g=a[2];if(f[0]==="name"&&f[1]==="define"||f[0]==="dot"&&f[1][1]==="require"&&f[2]==="def")if(g.length===1&&g[0][0]==="function")return g[0]}for(c=0;c<a.length;c++){d=a[c];if(b=this.findAnonRequireDefCallback(d))return b}}return null},i.findRequireDepNames=function(a,b){var c,d,f,g,h;if(e(a)){a[0]==="call"&&(g=a[1],h=a[2],g[0]==="name"&&g[1]==="require"&&(c=h[0],c[0]==="string"&&b.push(c[1])));for(d=0;d<a.length;d++)f=a[d],this.findRequireDepNames(f,b)}},i.nodeHasRequire=function(a){if(this.isRequireNode(a))return!0;if(e(a))for(var b=0,c;b<a.length;b++){c=a[b];if(this.nodeHasRequire(c))return!0}return!1},i.isRequireNode=function(a){var b;if(!a)return null;if(a[0]==="assign"&&a[1]===!0){b=a[2];if(b[0]==="dot"&&b[1][0]==="name"&&b[1][1]==="require"&&b[2]==="s")return!0}return!1},i.callToString=function(a,b,c,d){var e,i,k;c&&f(c)&&(d=c,c=null);if(d&&!h(d))return null;e=b&&g(b)&&j(b),i=j(c),k=j(d);return a+"("+(e?e:"")+(i?(e?",":"")+i:"")+(k?(e||i?",":"")+k:"")+");"},i.parseNode=function(a){var b,c,d,g,i;if(!e(a))return null;if(a[0]==="call"){b=a[1],i=a[2];if(b[0]==="name"&&b[1]==="require"){d=i[0],g=i[1],f(d)&&(g=d,d=null);if(!g||!h(g))return null;return this.callToString("require",null,null,g)}if(b[0]==="name"&&b[1]==="define"||b[0]==="dot"&&b[1][1]==="require"&&b[2]==="def"){c=i[0],g=i[1];return this.callToString("define",null,c,g)}}return null},i.nodeToString=function(a){return c.gen_code(a,!0)};return i})