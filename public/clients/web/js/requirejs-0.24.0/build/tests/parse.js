define(["parse"],function(a){doh.register("parseRequire",[function b(b){var c="require(['one', 'two'], function(){});",d="require({baseUrl: './'}, ['one', 'two']);",e="require([foo, 'me'], function() {});",f="require({baseUrl: './'});";b.is('require([ "one", "two" ]);',a("good1",c)),b.is('require([ "one", "two" ]);',a("good2",d)),b.is(null,a("bad1",e)),b.is(null,a("bad2",f))}]),doh.run(),doh.register("parseRequireDef",[function c(b){var c="require.def('one', ['two', 'three'], function(){});",d="require.def('one', function(){});",e='function baz(){ var foo = { bar: function() { require.def("one", ["two"], function(){}); } };}',f='(function (require) { require.def("one", function(){}); }(myGlobalRequire))',g="require.def('one', [foo, 'me'], function() {});",h="require.def('one', somevar)",i="require.def(function(){ var foo = require('foo'); });",j='require.def(function () { if (true) { callback(function () { require("bar"); })}});',k="require.def(function() { exports.name = 'empty'; });";b.is('define("one",[ "two", "three" ]);',a("good1",c)),b.is('define("one",function() {});',a("good2",d)),b.is('define("one",[ "two" ]);',a("good3",e)),b.is('define("one",function() {});',a("good4",f)),b.is(null,a("bad1",g)),b.is(null,a("bad2",h)),b.is(["require","exports","module","foo"],a.getAnonDeps("goodAnon1",i)),b.is(["require","exports","module","bar"],a.getAnonDeps("goodAnon2",j)),b.is(3,a.getAnonDeps("emptyAnon1",k).length)}]),doh.run(),doh.register("parseDefineCall",[function d(b){var c="define('one', ['two', 'three'], function(){});",d="define('one', function(){});",e='function baz(){ var foo = { bar: function() { define("one", ["two"], function(){}); } };}',f='(function (define) { define("one", function(){}); }(myGlobalDefine))',g="(function () {\nvar foo = {\nbar: 'baz'\n}\n\n define('foo', [], foo); \n }());",h="define('one', [foo, 'me'], function() {});",i="define('one', somevar)",j="define(function(){ var foo = require('foo'); });",k='define(function () { if (true) { callback(function () { require("bar"); })}});',l="define(function() { exports.name = 'empty'; });";b.is('define("one",[ "two", "three" ]);',a("good1",c)),b.is('define("one",function() {});',a("good2",d)),b.is('define("one",[ "two" ]);',a("good3",e)),b.is('define("one",function() {});',a("good4",f)),b.is('define("foo",[]);',a("nested1",g)),b.is(null,a("bad1",h)),b.is(null,a("bad2",i)),b.is(["require","exports","module","foo"],a.getAnonDeps("goodAnon1",j)),b.is(["require","exports","module","bar"],a.getAnonDeps("goodAnon2",k)),b.is(3,a.getAnonDeps("emptyAnon1",l).length)}]),doh.run(),doh.register("parseHasRequire",[function e(b){var c="var require; (function(){ require = function(){}; s = require.s = {};}());",d="var myGlobalRequire = (function () { var require = {}; (function(){ require = function(){}; s = require.s = {};}()); }());",e="var require; function boom(){ var require = function(){}; }",f="(function(require) { require(); }(myvar));";b.is(!0,a.definesRequire("good1",c)),b.is(!0,a.definesRequire("good2",d)),b.is(!1,a.definesRequire("bad1",e)),b.is(!1,a.definesRequire("bad2",f))}]),doh.run()})