(function(a){function q(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=q(c.childNodes));return b}function p(a){return typeof document!=="undefined"&&document&&document.getElementById&&document.getElementById(a)}function o(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):c()}function n(a,b){for(var c in b)a[c]=b[c];return a}function m(b,c,d){typeof console!=="undefined"&&console.error&&console.warn?(console.error(b),console.error(c),console.warn(d.toString())):a.opera&&opera.postError&&opera.postError(b,c,d.toString)}function l(a,b){var c=a.slice();for(var d=0;d<c.length;d++)for(var e=0;e<b.length;e++)if(c[d]===b[e]){c.splice(d,1),d--;break}return c}function k(a){var b=c.pollution;j();var d=l(b,c.pollution);d.length>0&&(ok(!1,"Introduced global variable(s): "+d.join(", ")),c.expected++);var e=l(c.pollution,b);e.length>0&&(ok(!1,"Deleted global variable(s): "+e.join(", ")),c.expected++)}function j(){c.pollution=[];if(c.noglobals)for(var b in a)c.pollution.push(b)}function i(){var a=(new Date).getTime();while(c.queue.length&&!c.blocking)if(c.updateRate<=0||(new Date).getTime()-a<c.updateRate)c.queue.shift()();else{setTimeout(i,13);break}}function h(a){c.queue.push(a),c.autorun&&!c.blocking&&i()}function g(a,d,e,g){g=f(g)||(a?"okay":"failed"),g='<span class="test-message">'+g+"</span>",e=f(b.jsDump.parse(e)),d=f(b.jsDump.parse(d));var h=g+', expected: <span class="test-expected">'+e+"</span>";d!=e&&(h+=' result: <span class="test-actual">'+d+"</span>, diff: "+b.diff(e,d)),b.log(a,h),c.assertions.push({result:!!a,message:h})}function f(a){a=a===null?"":a+"";return a.replace(/[\&"<>\\]/g,function(a){switch(a){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return a}})}function e(a){var b=c.filters.length,d=!1;if(!b)return!0;while(b--){var e=c.filters[b],f=e.charAt(0)=="!";f&&(e=e.slice(1));if(a.indexOf(e)!==-1)return!f;f&&(d=!0)}return d}function d(){c.doneTimer&&a.clearTimeout&&(a.clearTimeout(c.doneTimer),c.doneTimer=null);if(c.queue.length)c.doneTimer=a.setTimeout(function(){c.queue.length?h(d):d()},13);else{c.autorun=!0,c.currentModule&&b.moduleDone(c.currentModule,c.moduleStats.bad,c.moduleStats.all);var e=p("qunit-banner"),f=p("qunit-tests"),g=["Tests completed in ",+(new Date)-c.started," milliseconds.<br/>",'<span class="passed">',c.stats.all-c.stats.bad,'</span> tests of <span class="total">',c.stats.all,'</span> passed, <span class="failed">',c.stats.bad,"</span> failed."].join("");e&&(e.className=c.stats.bad?"qunit-fail":"qunit-pass");if(f){var i=p("qunit-testresult");i||(i=document.createElement("p"),i.id="qunit-testresult",i.className="result",f.parentNode.insertBefore(i,f.nextSibling)),i.innerHTML=g}b.done(c.stats.bad,c.stats.all)}}var b={module:function(a,d){c.currentModule=a,h(function(){c.currentModule&&b.moduleDone(c.currentModule,c.moduleStats.bad,c.moduleStats.all),c.currentModule=a,c.moduleTestEnvironment=d,c.moduleStats={all:0,bad:0},b.moduleStart(a,d)})},asyncTest:function(a,c,d){arguments.length===2&&(d=c,c=0),b.test(a,c,d,!0)},test:function(f,g,i,l){var r='<span class="test-name">'+f+"</span>",s,t;arguments.length===2&&(i=g,g=null),g&&typeof g==="object"&&(t=g,g=null),c.currentModule&&(r='<span class="module-name">'+c.currentModule+"</span>: "+r);e(c.currentModule+": "+f)&&(h(function(){s=n({setup:function(){},teardown:function(){}},c.moduleTestEnvironment),t&&n(s,t),b.testStart(f,s),b.current_testEnvironment=s,c.assertions=[],c.expected=g;var a=p("qunit-tests");if(a){var d=document.createElement("strong");d.innerHTML="Running "+r;var e=document.createElement("li");e.appendChild(d),e.id="current-test-output",a.appendChild(e)}try{c.pollution||j(),s.setup.call(s)}catch(h){b.ok(!1,"Setup failed on "+r+": "+h.message)}}),h(function(){l&&b.stop();try{i.call(s)}catch(a){m("Test "+r+" died, exception and test follows",a,i),b.ok(!1,"Died on test #"+(c.assertions.length+1)+": "+a.message),j(),c.blocking&&start()}}),h(function(){try{k(),s.teardown.call(s)}catch(a){b.ok(!1,"Teardown failed on "+r+": "+a.message)}}),h(function(){try{b.reset()}catch(e){m("reset() failed, following Test "+r+", exception and reset fn follows",e,reset)}c.expected&&c.expected!=c.assertions.length&&b.ok(!1,"Expected "+c.expected+" assertions, but "+c.assertions.length+" were run");var g=0,h=0,i=p("qunit-tests");c.stats.all+=c.assertions.length,c.moduleStats.all+=c.assertions.length;if(i){var j=document.createElement("ol");for(var k=0;k<c.assertions.length;k++){var l=c.assertions[k],n=document.createElement("li");n.className=l.result?"pass":"fail",n.innerHTML=l.message||"(no message)",j.appendChild(n),l.result?g++:(h++,c.stats.bad++,c.moduleStats.bad++)}h==0&&(j.style.display="none");var s=document.createElement("strong");s.innerHTML=r+" <b style='color:black;'>(<b class='fail'>"+h+"</b>, <b class='pass'>"+g+"</b>, "+c.assertions.length+")</b>",o(s,"click",function(){var a=s.nextSibling,b=a.style.display;a.style.display=b==="none"?"block":"none"}),o(s,"dblclick",function(b){var c=b&&b.target?b.target:a.event.srcElement;if(c.nodeName.toLowerCase()=="span"||c.nodeName.toLowerCase()=="b")c=c.parentNode;a.location&&c.nodeName.toLowerCase()==="strong"&&(a.location.search="?"+encodeURIComponent(q([c]).replace(/\(.+\)$/,"").replace(/(^\s*|\s*$)/g,"")))});var n=p("current-test-output");n.id="",n.className=h?"fail":"pass",n.removeChild(n.firstChild),n.appendChild(s),n.appendChild(j);if(h){var t=p("qunit-testrunner-toolbar");t&&(t.style.display="block",p("qunit-filter-pass").disabled=null,p("qunit-filter-missing").disabled=null)}}else for(var k=0;k<c.assertions.length;k++)c.assertions[k].result||(h++,c.stats.bad++,c.moduleStats.bad++);b.testDone(f,h,c.assertions.length),!a.setTimeout&&!c.queue.length&&d()}),a.setTimeout&&!c.doneTimer&&(c.doneTimer=a.setTimeout(function(){c.queue.length?h(d):d()},13)))},expect:function(a){c.expected=a},ok:function(a,d){d=f(d),b.log(a,d),c.assertions.push({result:!!a,message:d})},equal:function(a,b,c){g(b==a,a,b,c)},notEqual:function(a,b,c){g(b!=a,a,b,c)},deepEqual:function(a,c,d){g(b.equiv(a,c),a,c,d)},notDeepEqual:function(a,c,d){g(!b.equiv(a,c),a,c,d)},strictEqual:function(a,b,c){g(b===a,a,b,c)},notStrictEqual:function(a,b,c){g(b!==a,a,b,c)},raises:function(a,b){try{a(),ok(!1,b)}catch(c){ok(!0,b)}},start:function(){a.setTimeout?a.setTimeout(function(){c.timeout&&clearTimeout(c.timeout),c.blocking=!1,i()},13):(c.blocking=!1,i())},stop:function(d){c.blocking=!0,d&&a.setTimeout&&(c.timeout=a.setTimeout(function(){b.ok(!1,"Test timed out"),b.start()},d))}};b.equals=b.equal,b.same=b.deepEqual;var c={queue:[],blocking:!0};(function(){var d=a.location||{search:"",protocol:"file:"},e=d.search.slice(1).split("&");for(var f=0;f<e.length;f++)e[f]=decodeURIComponent(e[f]),e[f]==="noglobals"?(e.splice(f,1),f--,c.noglobals=!0):e[f].search("=")>-1&&(e.splice(f,1),f--);c.filters=e,b.isLocal=d.protocol==="file:"})(),typeof exports==="undefined"||typeof require==="undefined"?(n(a,b),a.QUnit=b):(n(exports,b),exports.QUnit=b),n(b,{config:c,init:function(){n(c,{stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+(new Date),updateRate:1e3,blocking:!1,autostart:!0,autorun:!1,assertions:[],filters:[],queue:[]});var a=p("qunit-tests"),b=p("qunit-banner"),d=p("qunit-testresult");a&&(a.innerHTML=""),b&&(b.className=""),d&&d.parentNode.removeChild(d)},reset:function(){a.jQuery&&jQuery("#main, #qunit-fixture").html(c.fixture)},triggerEvent:function(a,b,c){document.createEvent?(c=document.createEvent("MouseEvents"),c.initMouseEvent(b,!0,!0,a.ownerDocument.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(c)):a.fireEvent&&a.fireEvent("on"+b)},is:function(a,c){return b.objectType(c)==a},objectType:function(a){if(typeof a==="undefined")return"undefined";if(a===null)return"null";var b=Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]||"";switch(b){case"Number":return isNaN(a)?"nan":"number";case"String":case"Boolean":case"Array":case"Date":case"RegExp":case"Function":return b.toLowerCase()}if(typeof a==="object")return"object";return undefined},begin:function(){},done:function(a,b){},log:function(a,b){},testStart:function(a,b){},testDone:function(a,b,c){},moduleStart:function(a,b){},moduleDone:function(a,b,c){}});if(typeof document==="undefined"||document.readyState==="complete")c.autorun=!0;o(a,"load",function(){b.begin();var a=n({},c);b.init(),n(c,a),c.blocking=!1;var d=p("qunit-userAgent");d&&(d.innerHTML=navigator.userAgent);var e=p("qunit-testrunner-toolbar");if(e){e.style.display="none";var f=document.createElement("input");f.type="checkbox",f.id="qunit-filter-pass",f.disabled=!0,o(f,"click",function(){var a=document.getElementsByTagName("li");for(var b=0;b<a.length;b++)a[b].className.indexOf("pass")>-1&&(a[b].style.display=f.checked?"none":"")}),e.appendChild(f);var g=document.createElement("label");g.setAttribute("for","qunit-filter-pass"),g.innerHTML="Hide passed tests",e.appendChild(g);var h=document.createElement("input");h.type="checkbox",h.id="qunit-filter-missing",h.disabled=!0,o(h,"click",function(){var a=document.getElementsByTagName("li");for(var b=0;b<a.length;b++)a[b].className.indexOf("fail")>-1&&a[b].innerHTML.indexOf("missing test - untested code is broken code")>-1&&(a[b].parentNode.parentNode.style.display=h.checked?"none":"block")}),e.appendChild(h),g=document.createElement("label"),g.setAttribute("for","qunit-filter-missing"),g.innerHTML="Hide missing tests (untested code is broken code)",e.appendChild(g)}var i=p("main")||p("qunit-fixture");i&&(c.fixture=i.innerHTML),c.autostart&&b.start()}),b.equiv=function(){function e(a,c,d){var e=b.objectType(a);if(e)return b.objectType(c[e])==="function"?c[e].apply(c,d):c[e]}var a,c=[],d=[],f=function(){function e(a,b){return a instanceof b.constructor||b instanceof a.constructor?b==a:b===a}return{string:e,"boolean":e,number:e,"null":e,"undefined":e,nan:function(a){return isNaN(a)},date:function(a,c){return b.objectType(a)==="date"&&c.valueOf()===a.valueOf()},regexp:function(a,c){return b.objectType(a)==="regexp"&&c.source===a.source&&c.global===a.global&&c.ignoreCase===a.ignoreCase&&c.multiline===a.multiline},"function":function(){var a=c[c.length-1];return a!==Object&&typeof a!=="undefined"},array:function(c,e){var f,g,h,i;if(b.objectType(c)!=="array")return!1;i=e.length;if(i!==c.length)return!1;d.push(e);for(f=0;f<i;f++){h=!1;for(g=0;g<d.length;g++)d[g]===e[f]&&(h=!0);if(!h&&!a(e[f],c[f])){d.pop();return!1}}d.pop();return!0},object:function(b,e){var f,g,h,i=!0,j=[],k=[];if(e.constructor!==b.constructor)return!1;c.push(e.constructor),d.push(e);for(f in e){h=!1;for(g=0;g<d.length;g++)d[g]===e[f]&&(h=!0);j.push(f);if(!h&&!a(e[f],b[f])){i=!1;break}}c.pop(),d.pop();for(f in b)k.push(f);return i&&a(j.sort(),k.sort())}}}();a=function(){var a=Array.prototype.slice.apply(arguments);if(a.length<2)return!0;return function(a,c){return a===c?!0:a===null||c===null||typeof a==="undefined"||typeof c==="undefined"||b.objectType(a)!==b.objectType(c)?!1:e(a,f,[c,a])}(a[0],a[1])&&arguments.callee.apply(this,a.splice(1,a.length-1))};return a}(),b.jsDump=function(){function e(a){var b=a.length,c=Array(b);this.up();while(b--)c[b]=this.parse(a[b]);this.down();return d("[",c,"]")}function d(a,b,c){var d=g.separator(),e=g.indent(),f=g.indent(1);b.join&&(b=b.join(","+d+f));if(!b)return a+c;return[a,f+b,e+c].join(d)}function c(a){return a+""}function a(a){return'"'+a.toString().replace(/"/g,'\\"')+'"'}var f=/^function (\w+)/,g={parse:function(a,b){var c=this.parsers[b||this.typeOf(a)];b=typeof c;return b=="function"?c.call(this,a):b=="string"?c:this.parsers.error},typeOf:function(a){var c;a===null?c="null":typeof a==="undefined"?c="undefined":b.is("RegExp",a)?c="regexp":b.is("Date",a)?c="date":b.is("Function",a)?c="function":a.setInterval&&a.document&&!a.nodeType?c="window":a.nodeType===9?c="document":a.nodeType?c="node":typeof a!=="object"||typeof a.length!=="number"||a.length<0?c=typeof a:c="array";return c},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(a){if(!this.multiline)return"";var b=this.indentChar;this.HTML&&(b=b.replace(/\t/g,"   ").replace(/ /g,"&nbsp;"));return Array(this._depth_+(a||0)).join(b)},up:function(a){this._depth_+=a||1},down:function(a){this._depth_-=a||1},setParser:function(a,b){this.parsers[a]=b},quote:a,literal:c,join:d,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null","undefined":"undefined","function":function(a){var b="function",c="name"in a?a.name:(f.exec(a)||[])[1];c&&(b+=" "+c),b+="(",b=[b,this.parse(a,"functionArgs"),"){"].join("");return d(b,this.parse(a,"functionCode"),"}")},array:e,nodelist:e,arguments:e,object:function(a){var b=[];this.up();for(var c in a)b.push(this.parse(c,"key")+": "+this.parse(a[c]));this.down();return d("{",b,"}")},node:function(a){var b=this.HTML?"&lt;":"<",c=this.HTML?"&gt;":">",d=a.nodeName.toLowerCase(),e=b+d;for(var f in this.DOMAttrs){var g=a[this.DOMAttrs[f]];g&&(e+=" "+f+"="+this.parse(g,"attribute"))}return e+c+b+"/"+d+c},functionArgs:function(a){var b=a.length;if(!b)return"";var c=Array(b);while(b--)c[b]=String.fromCharCode(97+b);return" "+c.join(", ")+" "},key:a,functionCode:"[code]",attribute:a,string:a,date:a,regexp:c,number:c,"boolean":c},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:!1,indentChar:"   ",multiline:!1};return g}(),b.diff=function(){function a(a,b){var c=new Object,d=new Object;for(var e=0;e<b.length;e++)c[b[e]]==null&&(c[b[e]]={rows:[],o:null}),c[b[e]].rows.push(e);for(var e=0;e<a.length;e++)d[a[e]]==null&&(d[a[e]]={rows:[],n:null}),d[a[e]].rows.push(e);for(var e in c)c[e].rows.length==1&&typeof d[e]!="undefined"&&d[e].rows.length==1&&(b[c[e].rows[0]]={text:b[c[e].rows[0]],row:d[e].rows[0]},a[d[e].rows[0]]={text:a[d[e].rows[0]],row:c[e].rows[0]});for(var e=0;e<b.length-1;e++)b[e].text!=null&&b[e+1].text==null&&b[e].row+1<a.length&&a[b[e].row+1].text==null&&b[e+1]==a[b[e].row+1]&&(b[e+1]={text:b[e+1],row:b[e].row+1},a[b[e].row+1]={text:a[b[e].row+1],row:e+1});for(var e=b.length-1;e>0;e--)b[e].text!=null&&b[e-1].text==null&&b[e].row>0&&a[b[e].row-1].text==null&&b[e-1]==a[b[e].row-1]&&(b[e-1]={text:b[e-1],row:b[e].row-1},a[b[e].row-1]={text:a[b[e].row-1],row:e-1});return{o:a,n:b}}return function(b,c){b=b.replace(/\s+$/,""),c=c.replace(/\s+$/,"");var d=a(b==""?[]:b.split(/\s+/),c==""?[]:c.split(/\s+/)),e="",f=b.match(/\s+/g);f==null?f=[" "]:f.push(" ");var g=c.match(/\s+/g);g==null?g=[" "]:g.push(" ");if(d.n.length==0)for(var h=0;h<d.o.length;h++)e+="<del>"+d.o[h]+f[h]+"</del>";else{if(d.n[0].text==null)for(c=0;c<d.o.length&&d.o[c].text==null;c++)e+="<del>"+d.o[c]+f[c]+"</del>";for(var h=0;h<d.n.length;h++)if(d.n[h].text==null)e+="<ins>"+d.n[h]+g[h]+"</ins>";else{var i="";for(c=d.n[h].row+1;c<d.o.length&&d.o[c].text==null;c++)i+="<del>"+d.o[c]+f[c]+"</del>";e+=" "+d.n[h].text+g[h]+i}}return e}}()})(this)